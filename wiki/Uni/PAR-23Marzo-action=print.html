<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
 <title>Swappa : Uni / Protocolli avanzati di rete - Appunti del 23 Marzo</title>
 <meta http-equiv='Content-Type' content='text/html; charset=ISO-8859-1' />
 <meta http-equiv='Content-Language' content='en' />
 <meta http-equiv='Content-Style-Type' content='text/css' />
 <meta http-equiv="imagetoolbar" content="no" />
 <meta name='MSSmartTagsPreventParsing' content='true' />
 <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
.progress-bar {
	display: block;
	background: transparent; 
	width: 520px;
	font-size: 1px; /* for IE */
	margin: 2px 0;
}

.progress-bar .pb1, .progress-bar .pb2, .progress-bar .pb3, .progress-bar .pb4 {
	display: block; 
	background: #fff; 
	border-left:  1px solid #999; 
	border-right: 1px solid #999;

	overflow: hidden; 
	height: 1px; 
}
.progress-bar .pb1 { margin: 0 4px; background: #999;}
.progress-bar .pb2 { margin: 0 2px; border-width: 0 2px; }
.progress-bar .pb3 { margin: 0 1px; }
.progress-bar .pb4 { height: 11px; padding: 0 3px; }
.progress-bar .pb5 { display: block; background: #eeeeef; overflow:hidden; }

.progress-bar .bar {
	display: block;
	background: #a5bbd8;
	height: 11px;
	padding: 0;
}
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>
  <link rel='stylesheet' href='../pub/wsplus/wsplus.css' 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url('http://www.swappa.it/wiki/pub/wsplus/csshover.htc'); }
    .rollover * { visibility: visible; }
  </style><![endif]-->
<script type='text/javascript' src='../pub/syntaxlove/scripts/shCore.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCSharp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCpp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushJava.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPerl.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPhp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPython.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushRuby.js'></script> <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shCore.css'/>
  <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shThemeDefault.css'/>
  <script type='text/javascript'>
  	SyntaxHighlighter.config.clipboardSwf = 'http://www.swappa.it/wiki/pub/syntaxlove/scripts/clipboard.swf';
  	SyntaxHighlighter.all();
  </script>  <meta name='robots' content='noindex,nofollow' />

 <style type='text/css'><!--

/* Default Fonts */
body { font-family: Verdana,Arial,Helvetica,sans-serif; }
body, td, th { color:#000000; }
body, td, th { font-size: 10pt; }
small { font-size:0.85em; }
code { white-space: nowrap; }
h1, h2, h3, h4, h5 { margin-top:1em; margin-bottom:0.6em; }
h1 { font-size: 1.9em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }
h4 { font-size: 1.06em; }
h5 { font-size: 1.0em; }
ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }

/* Misc. */
body { width:auto; background-color:#ffffff; margin:0px; padding:0.5em; }
img { border-width: 0px; }
.indent { margin-left:30px; }
.outdent { margin-left:30px; text-indent:-30px; }
.vspace { margin-top:1.33em; }

/* Links */
a:link { color:#333333; font-weight:normal; text-decoration:underline; }
a:visited { color:#333333; font-weight:normal; text-decoration:underline; }
a.wikilink:hover { color: #333333; text-decoration:underline; }
a.createlink { text-decoration:none; position:relative; top:-0.5em; font-weight:bold; font-size:smaller; border-bottom:none; }
a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
a.varlink { text-decoration:none; }
.apprlink { font-size:smaller; }

/* Print View Page Header */
#printhead { font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }
#printhead a, #printhead a:visited { font-weight:bold; text-decoration:none; }
#cc { float:right; font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }

/* Print View Page Footer */
#printfoot { font-family: Arial,Helvetica,Geneva,sans-serif; margin-top:1em; border-top:2px solid #a0a0a0; font-size:7pt; }
  
 --></style>
</head>
<body>
  <div id='printhead'>
    <a href='../index.html' title='Swappa Home'>Swappa</a> :
    <a href='http://www.swappa.it/wiki/Uni' title='Uni Home'>Uni</a> /
    <a href='PAR-23Marzo.html' title='Protocolli avanzati di rete - Appunti del 23 Marzo'>Protocolli avanzati di rete - Appunti del 23 Marzo</a>
    <div id='cc'>
	<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">
	<img alt="Creative Commons License" style="border-width:0" height="15" width="80" src="http://i.creativecommons.org/l/by-nc-sa/2.5/it/80x15.png" />
	</a>
    </div>
  </div>
  
<!--PageText-->
<div id='wikitext'>
<p>
<a class='wikilink' href='ProtocolliAvanzatiDiRete.html'>Torna alla pagina di Protocolli avanzati di rete</a>
</p><hr />
<div class='vspace'></div><pre  style='text-align: center; background-color: #ffe4c4; border: 2px solid #cccccc; font-size: 13pt; padding: 5px;'> <strong>:: Protocolli avanzati di rete - Appunti del 23 Marzo ::</strong>
</pre><div class='vspace'></div><div class='frame' > 
<p>Tutte le immagini di questa pagina sono prese dalle slide del prof <a class='wikilink' href='Damiani.html'>Damiani</a>
</p></div>
<div class='vspace'></div><h2>Link management</h2>
<p>Tanto per cambiare un po argomento discutiamo di come opera la signaling.<br />Prendiamola larga e cominciamo a ricordare che con la comunicazione in fibra possono coesistere diversi standard di trasmissione. Indipendentemente però che stiamo trasmettendo in WDM (quindi a livello <strong>LSC</strong>, in multi &#955;) o TDM (su <strong>TSC</strong>, con &#955; fissato), dovremo riassegnare - rispettivamente - le &#955; e i canali ad ogni tratto, perché non è detto che gli stessi siano disponibili anche nella sezione successiva. Per tratto intendiamo il circuito virtuale che si genera in ogni sezione.
</p>
<p class='vspace'>La domanda è: <strong>se la connessione deve ancora nascere, come faccio a creare il percorso??</strong><br /><span  style='color: red;'>Attraverso un protocollo di signaling creo un percorso (circuito) mittente-destinatario assegnando delle <strong>label</strong> (etichette) ai dispositivi intermedi.</span><span  style='color: black;'><br />Questa operazione viene chiamata <strong>label switching</strong> o <strong>circuit provisioning</strong>, ed è supportata sia in LSC che in TSC. Viene effettuata una volta ogni tanto per riconfigurare la rete, soprattutto in seguito a guasti. L'evento scatenante potrebbe anche essere di livello 3, ma sicuramente non a livello di comunicazione, piuttosto di routering (riconfigurare tutto ad ogni telefonata sarebbe impensabile).<br />Ogni singola <em>label</em> può essere assegnata a uno slot temporale, a una lunghezza d'onda o ad una fibra, e la loro successione dà un'indicazione precisa sul percorso che dovranno seguire i dati.<br />Ecco in dettaglio come funziona: </span>
</p><ul><li>il nodo iniziale del percorso assegna un'etichetta ai dati, ad esempio <code class='escaped'>L5</code>, e la trasmette al secondo
</li><li>questo sostituisce la label con quella del nuovo canale che assegna lui, ad esempio <code class='escaped'>L7</code>, e la trasmette al terzo
</li><li>...
</li><li>con la sostituzione della label nell'ultimo nodo (ad esempio con <code class='escaped'>L9</code>), il nodo sorgente conosce finalmente l'intero (<code class='escaped'>L5-&gt;L7-&gt;...-&gt;L9</code>) e da questo momento si può procedere con la costruzione della comunicazione.
</li></ul><p class='vspace'>Per quanto riguarda la terminologia, i nodi estremi si chiamano <strong>LER</strong> (<em>Label Edge Router</em>) e quelli intermedi <strong>LSR</strong> (<em>Label Switch Router</em>). Notare che in questo modo non è possibile fare broadcast.
</p>
<p class='vspace'>L'esempio fatto sulle slide di Damiani è illuminante:
</p><div  style='text-align: center;'><img src='../uploads/Uni/labelSwitching.jpg' alt='' title='' /></div>
<p class='vspace'>Commentiamolo. A livello 3 i protocolli di routing si scambiano informazioni sulla ragiungibilità dei vari nodi. Contemporaneamente a livello 2 un protocollo di distribuzione delle label definisce la sequenza di etichette che identificano il percorso. Successivamente il primo nodo (il LER) riceve il pacchetto IP e lo etichetta con 10. Ogni nodo intermedio per il quale passa il pacchetto cancella la label precedente e mette la sua. Al secondo nodo abbiamo quindi lo stesso pacchetto IP con label 20, e così via. Arrivati a destinazione il LER finale cancella l'etichetta e consegna il pacchetto al destinatario :)
</p>
<p class='vspace'>Il fatto che si tratta di protocolli di configurazione ci viene ricordato anche dalla sigle finale <strong>-TE</strong> che sta per <em>Traffic Engeneering</em>.
</p>
<p class='vspace'>Nota di folklore: il <strong>drive run</strong> è la ricerca di un difetto di configurazione sulla rete, in una situazione di testing in cui non c'è traffico dati. Sono operazioni statiche da fare una volta ogni tot per garantire un servizio efficiente.
</p>
<div class='vspace'></div><h2>Protocolli di link management</h2>
<p>I principali protocolli che gestiscono l'instradamento a livello 2 sono tre: <strong>OSPF</strong> , <strong>RSVP</strong> e <strong>LMP</strong>. Operano <em>out-of-band</em>, quindi utilizzano per la signaling un canale distinto da quello usato per la comunicazione. Fanno tutti e tre parte della famiglia (o suite) di protocolli <strong>GMPLS</strong> (<em>Generalized Multi-Protocol Label Switching</em>), dedicati alla gestione del <code class='escaped'>control plane</code> su rete pubblica. Spieghiamo meglio quest'ultimo concetto: i protocolli che si occupano del trasporto di dati utente sono <code class='escaped'>data plane</code>, mentre quelli che si occupano della costruzione e configurazione dei data plane sono i <code class='escaped'>control plane</code>. Un esempio di protocolli di quest'ultimo tipo su rete privata sono quelli di gestione dello switching, in particolare quelli che effettuano un controllo su quali sono i servizi abilitati su una data porta della macchina (prevenendo in questo modo gli attacchi al DHCP autorizzando solo certi MAC conosciuti sicuri).
</p>
<p class='vspace'>Come collaborano questi protocolli per la gestione dei percorsi di rete? Facciamo una panoramica generale:
</p><ul><li>con l'OSPF-TE, dato un indirizzo IP di destinazione, viene calcolata la sequenza di label da seguire per portare i pacchetti al nodo finale. Generalmente questa oeprazione si fa in fase di drive run, quindi non è necessario ricalcolare i percorsi ad ogni telefonata
</li><li>l'RSVP-TE controlla in run time se le etichette individuate nella fase precedente sono attualmente disponibili, e se sì le riserva per la comunicazione
</li><li>chi si assicura che la sequenza di label sia sempre operativa? Il protocollo LMP, grazie al quale coppie di dispositivi si comunicano a vicenda la funzionalità effettiva delle proprie label, così da accorgersi in tempi rapidi se qualcosa non va
</li></ul><p class='vspace'>Vediamo ora in dettaglio questi tre sfavillanti protocolli.
</p>
<div class='vspace'></div><h3><span  style='color: red;'>OSPF</span></h3>
<p><strong>OSPF</strong> sta per <em>Open Shortest Path First</em> ed è il protocollo che definisce il cammino minimo per collegare ciascuna coppia di nodi in una rete. Ogni nodo ospita una tabella di routing in cui è indicato il nodo successivo da percorrere per raggiungere una data destinazione. Qualora un nodo non fosse raggiungibile (ad esempio per congestione della rete) viene trovato un percorso alternativo facendo aggiornare le tabelle di tutti i nodi coinvolti.<br />Detto in soldoni OSPF assegna le label, ed è definito come protocollo di instradamento.<br />Lo rivedremo meglio nella <a class='wikilink' href='PAR-24Marzo.html'>lezione di domani</a>.
</p>
<div class='vspace'></div><h3><span  style='color: red;'>RSVP</span></h3>
<p>L' <strong>RSVP</strong> (<em>ReSerVation Protocol</em>) è il protocollo che ha il compito di riservare un percorso esclusivo per la condivisione di risorse tra due nodi, e avere così miglior resa della trasmissione. Le risorse riservate dal protocollo sono label su reti pubbliche e porte di switch su reti private.<br />Facciamo un esempio pratico: il nostro DTI registra le lezioni di DAMIANI. Le manda al server UNIMI a Milano per l'elaborazione e la creazione dei DVD.
Riservando un percorso che va da DTI a UNIMI e viceversa invio le riprese su questo canale così sono sicuro che il video arriva presto e integro. Se però non l'avessi riservato, i frame contenenti il video sarebbero viaggiati sul percorso tradizionale insieme a tutto il traffico ordinario (mail che si scambiano innamorati, download di file etc.).<br />RSVP supporta due metodi per fare la riserva:
</p><ul><li><strong>hop by hop routing</strong>: ogni nodo attraversato dalla richiesta di reservation decide quale sarà il prossimo nodo. Viene eseguito solo se per qualche motivo non abbiamo già fatto OSPF
</li><li><strong>explicit routing</strong>: la lista dei nodi attraversati viene fornita direttamente al primo nodo del percorso
</li></ul><p class='vspace'>Vediamo come funziona:
</p><div  style='text-align: center;'><img src='../uploads/Uni/RSVP.jpg' alt='' title='' /></div>
<ul><li>il nodo sorgente manda un messaggio PATH al nodo successivo, specificando il nodo di destinazione
</li><li>il messaggio si propaga fino alla meta generando label
</li><li>la reservation vera e propria avviene con la propagazione del messaggio RESV, quindi solo al "ritorno"
</li></ul><p class='vspace'>Una volta riservato il cammino posso iniziare a trasmettere come se fossi collegato col nodo finale con una connessione point to point, quindi è come se avessi creato un macro-switch a rete ottica. Qualsiasi cosa voglia dire.
</p>
<div class='vspace'></div><h2><span  style='color: red;'>LMP</span></h2>
<p>Il protocollo <strong>LMP</strong> (<em>Link Management Protocol</em>) ha tre funzionalità:
</p><ol><li>collegare due nodi rispettandone le proprietà (ad esempio collega due nodi che hanno la stessa velocità)
</li><li>verificare i collegamenti in modo sincrono o asincrono rispetto alla riserva, controllando che i nodi indicati da OSPF siano effettivamente disponibili
</li><li>individuazione dei guasti: quando un segmento cade bisogna identificare la label che ha fallito e sostituire solo lei
</li></ol><p class='vspace'>Al contrario della maggior parte dei canali di controllo, la <em>link verification</em> deve avvenire per forza in-band sullo stesso canale dei dati. Viene effettuata generalmente in fase di drive run per verificare che i canali dei dati funzionino effettivamente. Quando invece nella rete c'è traffico dati (o un guasto) possiamo usare questo canale di controllo per fare misurazioni sulla trasmissione.
</p>
<p class='vspace'>Per quanto riguarda la <em>fault localization</em>, l'LMP è in grado di individuare la specifica &#955; su cui si è verificato l'errore. Ovviamente deve funzionare almeno il laser di controllo, se no arrivederci e grazie. Ecco uno schema:
</p>
<div class='vspace'></div><div  style='text-align: center;'><img src='../uploads/Uni/linkVerification.jpg' alt='' title='' /></div>
<p class='vspace'>Particolarità: per ogni collegamento tra due nodi devono essere specificate diverse informazioni come il numero di canali presenti sul link, gli identificativi dei singoli canali, eccetera.
</p>
<div class='vspace'></div><hr />
<p><a class='wikilink' href='ProtocolliAvanzatiDiRete.html'>Torna alla pagina di Protocolli avanzati di rete</a>
</p>
</div>

  <div id='printfoot'>
    <div class='printview'>(Printable View of <span style='white-space:nowrap;'>http://www.swappa.it/wiki/Uni/PAR-23Marzo)</span></div>
  </div>
</body>
</html>
