<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
 <title>Swappa : Uni / Temi d'esame di Sistemi - 16/04/2009</title>
 <meta http-equiv='Content-Type' content='text/html; charset=ISO-8859-1' />
 <meta http-equiv='Content-Language' content='en' />
 <meta http-equiv='Content-Style-Type' content='text/css' />
 <meta http-equiv="imagetoolbar" content="no" />
 <meta name='MSSmartTagsPreventParsing' content='true' />
 <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
.progress-bar {
	display: block;
	background: transparent; 
	width: 520px;
	font-size: 1px; /* for IE */
	margin: 2px 0;
}

.progress-bar .pb1, .progress-bar .pb2, .progress-bar .pb3, .progress-bar .pb4 {
	display: block; 
	background: #fff; 
	border-left:  1px solid #999; 
	border-right: 1px solid #999;

	overflow: hidden; 
	height: 1px; 
}
.progress-bar .pb1 { margin: 0 4px; background: #999;}
.progress-bar .pb2 { margin: 0 2px; border-width: 0 2px; }
.progress-bar .pb3 { margin: 0 1px; }
.progress-bar .pb4 { height: 11px; padding: 0 3px; }
.progress-bar .pb5 { display: block; background: #eeeeef; overflow:hidden; }

.progress-bar .bar {
	display: block;
	background: #a5bbd8;
	height: 11px;
	padding: 0;
}
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>
  <link rel='stylesheet' href='../pub/wsplus/wsplus.css' 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url('http://www.swappa.it/wiki/pub/wsplus/csshover.htc'); }
    .rollover * { visibility: visible; }
  </style><![endif]-->
<script type='text/javascript' src='../pub/syntaxlove/scripts/shCore.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCSharp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCpp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushJava.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPerl.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPhp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPython.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushRuby.js'></script> <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shCore.css'/>
  <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shThemeDefault.css'/>
  <script type='text/javascript'>
  	SyntaxHighlighter.config.clipboardSwf = 'http://www.swappa.it/wiki/pub/syntaxlove/scripts/clipboard.swf';
  	SyntaxHighlighter.all();
  </script>  <meta name='robots' content='noindex,nofollow' />

 <style type='text/css'><!--

/* Default Fonts */
body { font-family: Verdana,Arial,Helvetica,sans-serif; }
body, td, th { color:#000000; }
body, td, th { font-size: 10pt; }
small { font-size:0.85em; }
code { white-space: nowrap; }
h1, h2, h3, h4, h5 { margin-top:1em; margin-bottom:0.6em; }
h1 { font-size: 1.9em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }
h4 { font-size: 1.06em; }
h5 { font-size: 1.0em; }
ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }

/* Misc. */
body { width:auto; background-color:#ffffff; margin:0px; padding:0.5em; }
img { border-width: 0px; }
.indent { margin-left:30px; }
.outdent { margin-left:30px; text-indent:-30px; }
.vspace { margin-top:1.33em; }

/* Links */
a:link { color:#333333; font-weight:normal; text-decoration:underline; }
a:visited { color:#333333; font-weight:normal; text-decoration:underline; }
a.wikilink:hover { color: #333333; text-decoration:underline; }
a.createlink { text-decoration:none; position:relative; top:-0.5em; font-weight:bold; font-size:smaller; border-bottom:none; }
a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
a.varlink { text-decoration:none; }
.apprlink { font-size:smaller; }

/* Print View Page Header */
#printhead { font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }
#printhead a, #printhead a:visited { font-weight:bold; text-decoration:none; }
#cc { float:right; font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }

/* Print View Page Footer */
#printfoot { font-family: Arial,Helvetica,Geneva,sans-serif; margin-top:1em; border-top:2px solid #a0a0a0; font-size:7pt; }
  
 --></style>
</head>
<body>
  <div id='printhead'>
    <a href='../index.html' title='Swappa Home'>Swappa</a> :
    <a href='http://www.swappa.it/wiki/Uni' title='Uni Home'>Uni</a> /
    <a href='TemiEsameSED14.html' title='Temi d'esame di Sistemi - 16/04/2009'>Temi d'esame di Sistemi - 16/04/2009</a>
    <div id='cc'>
	<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">
	<img alt="Creative Commons License" style="border-width:0" height="15" width="80" src="http://i.creativecommons.org/l/by-nc-sa/2.5/it/80x15.png" />
	</a>
    </div>
  </div>
  
<!--PageText-->
<div id='wikitext'>
<p>
<a class='wikilink' href='Sistemi.html'>Torna alla pagina di Sistemi per l'elaborazione delle informazioni</a>
</p><hr />
<div class='vspace'></div><pre  style='text-align: center; background-color: #ffe4c4; border: 2px solid #cccccc; font-size: 13pt; padding: 5px;'>  <strong>:: Temi d'esame di Sistemi - 16/04/2009 ::</strong>
</pre><div class='vspace'></div><h2>Esercizio 1 (8 punti)</h2>
<p class='vspace'>Un browser WEB deve scaricare una pagina che contiene 6 immagini da 1 Mbyte ciascuna, 
3 delle quali sono memorizzate sullo stesso server e 3 se su un server diverso,
Si consideri sia l'utilizzo di HTTP 1.0 che 1.1.
</p>
<p class='vspace'>(1)Quante connessioni TCP vengono aperte?
</p>
<p class='vspace'>(2)Supponendo che la max banda vista dal browser sia 100 kbps su ciascuna connessione
</p><pre> TCP, che RTT sia costante su tutte le connessioni e pari a 100 msec, e che la banda 
</pre><p>di partenza per tutte le connessioni sia 16 kbps, quanto è il tempo totale di 
scaricamento di tutte le immagini?
</p>
<div class='vspace'></div><h2>Esercizio 2 (6 punti)</h2>
<p class='vspace'>Un utente si collega al web della rete di un'azienda utilizza un proxy http che lavora 
sulla porta 8080. Si supponga che il browser generi il seguente pacchetto di richiesta 
HTTP:
</p>
<p class='vspace'><br clear='all' />GET <a class='urllink' href='http://www.unimi.it/HTTP/1.1' title='' rel='nofollow'>http://www.unimi.it/HTTP/1.1</a>
<br clear='all' />Accept: */*
<br clear='all' />Accept-Language: en
<br clear='all' />Accept-Encoding: gzip, deflate
<br clear='all' />Cookie: monster_728x240_expAnsa_091006=00238b6afa1ff3e8e1393f86619f
6837;
<br clear='all' />User-Agent: Mozilla/5.0 (Macintosh; U; PPC Mac OS X; en)
<br clear='all' />AppleWebKit/418.9
<br clear='all' />Pragma: no-cache
<br clear='all' />Connection: keep-alive
<br clear='all' />Host: www.unimi.it
</p>
<div class='vspace'></div><pre>	a. Si descriva il significato di tutti i campi del pacchetto

	b. Si illustri passo per passo cosa fa il proxy quando riceve la richiesta del
 browser, supponendo che per quest'ultimo sia configurato per utilizzare come proxy la
 porta 4040.
</pre><div class='vspace'></div><h2>Esercizio 3 (12 punti)</h2>
<div class='round lrindent evvai' > 
<p>Questo esercizio ha una soluzione grazie agli appunti inviati durante la chiusura della sezione Unicrema:) Non ne siete felici?:)
</p></div>
<p class='vspace'>Il servizio ruptime fornisce il nome degli host attivi sulla sottorete e il loro tempo 
totale di attività. Ecco la relativa pagina man:
</p>
<p class='vspace'>NAME
</p><pre>	ruptime -- show host status of local machines
</pre><p>SYNOPSIS
</p><pre>	ruptime [-alrtu]
</pre><p>DESCRIPTION
</p><pre>	Ruptime gives a status line like uptime for each machine on the local network; 
</pre><p>these are formed from packets broadcast by each host on the network once a minute.
</p><pre>	Machines for which no status report has been received for 11 minutes are shown
 as being down.
</pre><p class='vspace'>Fornite lo pseudocodice per un client ruptime, facendo tutte le opportune ipotesi e 
mettendo in evidenza le chiamate alla socket library che utilizzate.
</p>
<div class='vspace'></div><h5>Soluzione</h5>
<p>Ecco le operazioni da fare:
</p><ol><li>Creazione socket e configurazione per l'invio di pacchetti ogni minuto a tutti gli host
</li><li>Creazione socket ricezione (IP/porta host mittente richiesti da command line) + utilizzo
</li></ol><p>select()+utilizzo recvfrom()
</p>
<div class='vspace'></div><pre> //creo il socket per la trasmissione agli host della rete con modalita connectionless
 if ((sock_upt = socket(PF_INET, SOCK_DGRAM, 0)) &lt; 0) {
   perror("socket");
   exit(1);
 }

 //attraverso la funzione si setsockopt abilito il broadcast
 if (setsockopt(sock_upt, SOL_SOCKET, SO_BROADCAST, &amp;on, sizeof(on)) &lt; 0) {
   perror("setsockopt");
   exit(1);
 }

 //inizializzo il socket
 sin.sin_family = PF_INET;
 sin.sin_addr.s_addr = INADDR_BROADCAST;
 sin.sin_addr.s_port = htons(5555);
 while(1) {
   @adesso = localtime(time);
   // solo nei primi due secondi di ogni minuto
   if($adesso[0]&lt;2) {
     sendto(sock_upt,&amp;info,lenght_uptime,0,sockadrr*)&amp;sin,add_lenght);
   }
 }

 // Creo l’array di descrittori di socket
 for (port = 0; port &lt; lenght; port++){
   // Recupero la porta da utilizzare dalla lista di porte
   // specificata a linea di comando
   portNo = atoi(argv[port + 2]);

   //richiedo indirizzo ip dell'host da cui voglio ricevere
   //le informazioni sull'uptime
   printf("Inserire indirizzo ip dell'host");
   scanf(%c,add_client);

   // Creo il socket relativo a quella porta
   //e a quell'indirizzo e faccio il bind
   servSock[port] = CreateUDPServerSocket(portNo,add_client);
 }

 while (running) {
   // Azzero l’insieme dei socket controllati
   //che saranno controllati dalla select.
   //Deve essere chiamata prima di ogni select().
   FD_ZERO(&amp;rset);

   // Inserisco i socket creati nella lista di descrittori che la select controlla
   for (port = 0; port &lt; noPorts; port++) {
     FD_SET(servSock[port], &amp;rset);
   }

   // Imposto il timeout prima di ogni select()
   selTimeout.tv_sec = 6600; // secondi
   if (select(servSock + 1, &amp;rset, NULL, NULL, &amp;selTimeout) == 0) {

     //suppongo che se l'host non mi risp entro 11 min vuol dire che non è
     // collegato e quindi non avrò richieste in lettura
     printf("Timeoout");
   } else {
     //ricevo l'uptime del client di cui ho fatto richiesta
     //specificando l'indirizzo del mittente
     n=recvfrom(servSock + 1,&amp;uptime,lenght,flags,sockaddr*) &amp;add_client,add_lenght);

     if(n&lt;0) {
       printf("errore");
     } else {
       printf(uptime);//visualizza le informazioni legate all'uptime del host richiesto
     }

     close(servSock+1);
   }
 }
</pre><div class='vspace'></div><h2>Esercizio 4 (4 punti)</h2>
<p class='vspace'>Sun XDR converte i dati nello standard big-endian prima di trasmetterli. Spiegate in 
cosa consiste questa conversione attraverso un esempio. (Opzionale) Discutete vantaggi
</p><pre> e svantaggi di questa tecnica rispetto a Receiver Make it Right.
</pre>
</div>

  <div id='printfoot'>
    <div class='printview'>(Printable View of <span style='white-space:nowrap;'>http://www.swappa.it/wiki/Uni/TemiEsameSED14)</span></div>
  </div>
</body>
</html>
