<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
 <title>Swappa : Uni / Temi d'esame di Sistemi - 11/11/2005</title>
 <meta http-equiv='Content-Type' content='text/html; charset=ISO-8859-1' />
 <meta http-equiv='Content-Language' content='en' />
 <meta http-equiv='Content-Style-Type' content='text/css' />
 <meta http-equiv="imagetoolbar" content="no" />
 <meta name='MSSmartTagsPreventParsing' content='true' />
 <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
.progress-bar {
	display: block;
	background: transparent; 
	width: 520px;
	font-size: 1px; /* for IE */
	margin: 2px 0;
}

.progress-bar .pb1, .progress-bar .pb2, .progress-bar .pb3, .progress-bar .pb4 {
	display: block; 
	background: #fff; 
	border-left:  1px solid #999; 
	border-right: 1px solid #999;

	overflow: hidden; 
	height: 1px; 
}
.progress-bar .pb1 { margin: 0 4px; background: #999;}
.progress-bar .pb2 { margin: 0 2px; border-width: 0 2px; }
.progress-bar .pb3 { margin: 0 1px; }
.progress-bar .pb4 { height: 11px; padding: 0 3px; }
.progress-bar .pb5 { display: block; background: #eeeeef; overflow:hidden; }

.progress-bar .bar {
	display: block;
	background: #a5bbd8;
	height: 11px;
	padding: 0;
}
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>
  <link rel='stylesheet' href='../pub/wsplus/wsplus.css' 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url('http://www.swappa.it/wiki/pub/wsplus/csshover.htc'); }
    .rollover * { visibility: visible; }
  </style><![endif]-->
<script type='text/javascript' src='../pub/syntaxlove/scripts/shCore.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCSharp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCpp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushJava.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPerl.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPhp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPython.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushRuby.js'></script> <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shCore.css'/>
  <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shThemeDefault.css'/>
  <script type='text/javascript'>
  	SyntaxHighlighter.config.clipboardSwf = 'http://www.swappa.it/wiki/pub/syntaxlove/scripts/clipboard.swf';
  	SyntaxHighlighter.all();
  </script>  <meta name='robots' content='noindex,nofollow' />

 <style type='text/css'><!--

/* Default Fonts */
body { font-family: Verdana,Arial,Helvetica,sans-serif; }
body, td, th { color:#000000; }
body, td, th { font-size: 10pt; }
small { font-size:0.85em; }
code { white-space: nowrap; }
h1, h2, h3, h4, h5 { margin-top:1em; margin-bottom:0.6em; }
h1 { font-size: 1.9em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }
h4 { font-size: 1.06em; }
h5 { font-size: 1.0em; }
ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }

/* Misc. */
body { width:auto; background-color:#ffffff; margin:0px; padding:0.5em; }
img { border-width: 0px; }
.indent { margin-left:30px; }
.outdent { margin-left:30px; text-indent:-30px; }
.vspace { margin-top:1.33em; }

/* Links */
a:link { color:#333333; font-weight:normal; text-decoration:underline; }
a:visited { color:#333333; font-weight:normal; text-decoration:underline; }
a.wikilink:hover { color: #333333; text-decoration:underline; }
a.createlink { text-decoration:none; position:relative; top:-0.5em; font-weight:bold; font-size:smaller; border-bottom:none; }
a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
a.varlink { text-decoration:none; }
.apprlink { font-size:smaller; }

/* Print View Page Header */
#printhead { font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }
#printhead a, #printhead a:visited { font-weight:bold; text-decoration:none; }
#cc { float:right; font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }

/* Print View Page Footer */
#printfoot { font-family: Arial,Helvetica,Geneva,sans-serif; margin-top:1em; border-top:2px solid #a0a0a0; font-size:7pt; }
  
 --></style>
</head>
<body>
  <div id='printhead'>
    <a href='../index.html' title='Swappa Home'>Swappa</a> :
    <a href='http://www.swappa.it/wiki/Uni' title='Uni Home'>Uni</a> /
    <a href='TemiEsameSED08.html' title='Temi d'esame di Sistemi - 11/11/2005'>Temi d'esame di Sistemi - 11/11/2005</a>
    <div id='cc'>
	<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">
	<img alt="Creative Commons License" style="border-width:0" height="15" width="80" src="http://i.creativecommons.org/l/by-nc-sa/2.5/it/80x15.png" />
	</a>
    </div>
  </div>
  
<!--PageText-->
<div id='wikitext'>
<p>
<a class='wikilink' href='Sistemi.html'>Torna alla pagina di Sistemi per l'elaborazione delle informazioni</a>
</p><hr />
<div class='vspace'></div><pre  style='text-align: center; background-color: #ffe4c4; border: 2px solid #cccccc; font-size: 13pt; padding: 5px;'> <strong>:: Temi d'esame di Sistemi - 11/11/2005 ::</strong>
</pre><div class='vspace'></div><h2>Esercizio 1</h2>
<p><strong>Scrivete lo pseudocodice e le chiamate alla socket library necessarie per realizzare un semplice WWW client con i seguenti requisiti:</strong>
</p>
<div class='vspace'></div><ol><li><strong>Dalla linea di comando, leggete (1) la URL che si vuol leggere sul server e (2) il server port number. Create il socket e collegatelo alla porta specificata (e.g., HTTP porta 80) [suggerimento: usate le chiamate getservbyname, gethostbyname, socket, connect].</strong>
<div class='vspace'></div></li><li><strong>Inviate la richiesta al WWW server usando il messaggio GET del protocollo http. Specificate esplicitamente la richiesta.</strong>
<div class='vspace'></div></li><li><strong>Leggete i dati dalla connessione HTTP e salvateli su un file temporaneo creato nella vostra WWW cache (e.g., /tmp/yourloginname)sul computer locale</strong>
<div class='vspace'></div></li><li><strong>Lanciate il processo di un viewer per mostrare a video il ile (suggerimento: usate [fork/exec]. Spiegate almeno due tecniche che potreste usare per decidere il viewer da lanciare a seconda del contenuto del file (suggerimento:usate il campo ContentType di http)</strong>
</li></ol><p class='vspace'><span  style='color: red;'><span style='font-size:83%'><strong>SOLUZIONE</strong></span></span>
</p>
<p class='vspace'><em>Schema riassuntivo dello pseudocodice:</em><br /><br />
</p><ol><li>creare le variabili per leggere da linea di comando
</li><li>creo un socket
</li><li>controllo errore sul socket
</li><li>creo struttura sockaddr_in (per i campi vedi <a class='urllink' href='http://www.doppioclic.altervista.org/wiki/index.php?n=Uni.SocketLibrary' title='' rel='nofollow'>socket library</a> )
</li><li>faccio la connect
</li><li>faccio un controllo sullo status
</li><li>creo stringa da inviare con la send
</li><li>chiamo la recv (per i campi vedi <a class='urllink' href='http://www.doppioclic.altervista.org/wiki/index.php?n=Uni.SocketLibrary' title='' rel='nofollow'>socket library</a> )
</li><li>controllo il contenuto della prima riga della risposta (HTTP/1.1 200 OK )
</li><li>analizzo tutti i dati che sono arrivati dal server e li salvo in un file temporaneo, poi estraggo il contenuto di content-type in una stringa
</li><li>controllo il contenuto della stringa content-type e lancio il comando appropriato
</li><li>chiudo la socket<br /><br />
</li></ol><p><em>Pseudocodice:</em><br /><br />LATO CLIENT
</p>
<p class='vspace'>//suppongo che il nome del mio host sia nella posizione 1 dell’array e che il numero di porta sia nella posizione 2
</p>
<p class='vspace'>nome=parametro[1]<br />porta=parametro[2]<br /><br />
//creo il socket sockid<br /><br />
int sockid = socket (PF_INET, SOCK_STEAM, IPPORTO_TCP)<br /><br />
//costruisco la struct sockaddr_in , sockaddr pecifica per IP che qui chiamo destinazione<br /><br />
struct destinazione{                                         //per brevità usiamo l'assegnamento<br />destinazione.sin_famyly = AF_INET;<br />destinazione.sin_port = porta ;                                        // numero di porta<br />destinazione.sin_addr = gethostbyname(nome);            //nome dell’host<br />}<br /><br />
</p>
<p class='vspace'>//CONNECT<br /><br />
status = connect (sockid, destinazione, NULL)<br /><br />//controllo lo stato : se lo stato è =0 va tutto bene altrimenti mando un msg di errore ed esco<br /><br />
If (status = = -1){<br />print(“Errore”);<br />exit(-1);}<br /><br />
//definisco una string richiesta che contiene la prima linea di una richiesta http e la string risposta <br /><br />
string richiesta =”GET” + nome + “HTTP/1.1 \n” + “connection: close”<br /><br />
//per poter ricevere il file devo avere un buffer (risposta)che lo contenga<br /><br />
string risposta;<br /><br />
//RECEIVE<br /><br />
recv (sockid, risposta, strlenght, 0)<br />if (risposta != “http/1.1 200 OK”)
</p><div class='indent'>{print(“errore”);
</div><div class='indent'>exit(-1);}<br /><br />
</div><p>recv (sockid, risposta, strlenght, 0)<br /><br />
//creo la stringa type che dovrà contenere il valore di content-type e la variabile lunghezza che dovrà contenere il valore di content-lenght<br /><br />
string type= parse(risposta, “content-type”);<br />int lunghezza = parse (risposta, “content-lenght”);<br /><br />
//creo il buffer buffer lungo quanto il mess di risposta (lunghezza)<br /><br />
Char buffer = new char[lunghezza]<br /><br />
recv (sockid, buffer, lunghezza, 0)<br /><br />
Status =close(sockid);<br />if (status = = -1”)
</p><div class='indent'>{print(“errore”);
</div><div class='indent'>exit(-1);}<br /><br />
</div><p>//suppongo che il file da inviare si chiami temporaneo.temp e che si trovi nella cartella temp (/temp/temporaneo.temp)<br /><br />
//creo il file temporaneo (basta un commento)<br />
create newFileTemp= FileTemporaneo<br /><br />
//quindi copio o caratteri in una variabile stringa "cont" fino ai caratteri "/n"<br />
string cont =copiaCaratteri (FileTemporaneo);<br /><br />
//utilizzo uno switch per scrivere un una stringa "comando" il nome del viewer da aprire a seconda del contenuto del "cont"<br />
switch (cont){<br />--&gt;case=”text.html”
</p><dl><dd><div class='indent'>then comando=modzilla 6.0;
</div><div class='indent'>break;<br /><br />
</div><div class='indent'>case=”image/*”
</div><div class='indent'>then comando=gimp;
</div><div class='indent'>break;<br /><br />
</div><div class='indent'>case=”audio/*”
</div><div class='indent'>then comando=windows media player;
</div><div class='indent'>break;<br /><br />
</div></dd></dl><p>else comando=notepad;}<br /><br />
//aggiungo a comando il percorso e il nome del file<br />
comando = comando + “/temp/temporaneo.temp”;<br /><br />
execute(comando);<br /><br />
return(0);
</p>
<p class='vspace'><a class='urllink' href='../uploads/Uni/Es1SED08.pdf' title='' rel='nofollow'>Versione alternativa in PDF</a>
</p>
<p class='vspace'><strong>CHE BELLO QUESTO PSEUDO COSI' PSYCO!</strong><br /><span style='font-size:69%'>Quake</span>
</p>
<div class='vspace'></div><hr />
<div class='vspace'></div><h2>Esercizio 2</h2>
<p><strong>Sun XDR converte i dati nello standard big-endian prima di trasmetterli. Spiegate in cosa consiste questa conversione attraverso un esempio. (opzionale) Discutete vantaggi e svantaggi di questa tecnica rispetto a Receiver Makes it Right e CORBA CDR</strong>
</p>
<p class='vspace'><span  style='color: red;'><span style='font-size:83%'><strong>SOLUZIONE</strong></span></span>
</p>
<p class='vspace'>I dati possono essere big-endian e little-endian, questi due standard consistono in un differente ordinamento dei byte. Little-endian ordina prima i byte <strong>meno</strong> significativi (<em>ex</em>: 12.40.119.128) mentre big-endian ordina prima i byte <strong>più</strong> significativi (<em>ex</em>: 128.119.40.12).<br />Un host può utilizzare entrambi gli ordinamenti, mentre la rete utilizza solo l’ordinamento big-endian quindi è necessario fare una conversione nell’ordine dei byte della rete prima di trasmettere (<strong>Marshalling</strong>) e un'altra conversione nel momento della ricezione(<strong>Unmarshalling</strong>). Questo processo si può schematizzare in questo modo: marshalling --&gt; trasmissione --&gt; ricezione --&gt; unmarshalling
</p>
<div class='vspace'></div><div><img src='../uploads/Uni/esempio1SED08.jpg' alt='' title='' /></div>
<p class='vspace'>NOTA: se una macchina è già big-endian queste conversioni non fanno nulla.<br /><br />Vedi slide <strong>DAM_U4_U1_L5</strong>
</p>
<div class='vspace'></div><hr />
<div class='vspace'></div><h2>Esercizio 3</h2>
<p><strong>Con riferimento allo scambio http che segue, spiegate (1) la richiesta http (2) tutti i campi della risposta e il loro significato.</strong>
</p>
<p class='vspace'><em>% telnet www.crema.unimi.it 80</em> <br /><em>Trying 157.99.64.12...</em> <br /><em>Connected to www.crema.unimi.it.</em> <br /><em>Escape character is '^]'.</em> <br /><em>HEAD /formation/infobio/web/course/data/page1.html HTTP/1.0</em> <br /><br />
<em>HTTP/1.1 200 OK</em> <br /><em>Date: Tue, 24 Feb 2004 18:01:05 GMT</em> <br /><em>Server: Apache/1.3.26 (Unix) mod_perl/1.24_01 mod_ss1/2.8.10 OpenSSL/0.9.5a</em> <br /><em>Last-Modified: Tue, 18 Feb 2005 14:38:31 GMT</em> <br /><em>ETag: "101e6a1-cd-3e5237be"</em> <br /><em>Accept-Ranges: bytes</em> <br /><em>Content-Lenght: 205</em> <br /><em>Connection: close</em> <br /><em>Content-Type: text/html; charset=iso-8859-1</em> <br /><br />
<span  style='color: red;'><span style='font-size:83%'><strong>SOLUZIONE</strong></span></span>
</p>
<p class='vspace'>Richiesta http:<br />Esegue una connessione telnet al sito www.crema.unimi.it sulla porta 80.<br />Una volta connesso il carattere di terminazione è ‘^]’ che corrisponde all’…..<br />Il metodo HEAD è uguale al GET (richiede qualunque oggetto che sia stato identificato dalla URL di richiesta), ma il server non deve includere un messaggio nel body della risposta quindi restituisce solo i campi dell'header.<br /><br />
Campi della risposta:<br /><ins> <em>http/1.1:</em> </ins> indica il protocollo e la sua versione.<br /><ins> <em>200 OK:</em> </ins> significa che la richiesta è andata a buon fine e l’oggetto richiesto è incluso nella risposta.<br />NOTA: il <em>numero</em> è lo status code, mentre <em>ok</em> è lo status message, rappresentano la stessa informazione, ma una sotto forma di numero, l’altra sotto forma di messaggio.<br /><ins> <em>Date:</em> </ins> data di creazione della risposta<br /><ins> <em>Server:</em> </ins> tipo di Web Server<br /><ins> <em>Last-Modified:</em> </ins> data dell’ultima modifica dell’oggetto richiesto<br /><ins> <em>ETag:</em> </ins> identificativo della pagina, se la pagina cambia, cambia anche questo valore<br /><ins><em>Accept-Ranges:</em> </ins> specifica quale tipo di contenuto questo server supporta, che tipo di range può accettare. I valori previsti sono: <em>bytes</em> e <em>none</em><br /><ins><em>Content-Length:</em> </ins> dimensioni in bytes della risposta<br /><ins><em>Connection:</em> </ins> close indica una connessione non persistente<br /><ins><em>Content-Type:</em> </ins> tipo dell’oggetto contenuto nell’Entity Body, nel corpo della risposta.<br />In questo caso testo di tipo html e codifica iso-8859-1<br />
</p>
<div class='vspace'></div><hr />
<div class='vspace'></div><h2>Domande:</h2>
<ol><li><strong>Spiegate CON UN ESEMPIO cos'é il <em>challenge</em> nel protocollo CHAP di controllo sicuro delle password</strong>
</li><li><strong>Cos'é il <em>portmapper</em>, su quale porta opera e in quale protocollo applicativo è utilizzato?</strong>
</li><li><strong>Fate un esempio di query inversa al DNS usando il comando nslookup</strong>
</li></ol><p class='vspace'><span  style='color: red;'><span style='font-size:83%'><strong>SOLUZIONE</strong></span></span>
</p>
<p class='vspace'><strong>1.</strong><br /><em>Challenge Handshake Authentication Protocol (CHAP)</em>
Il protocollo Challenge Handshake Authentication Protocol (CHAP)) è un metodo di autenticazione ampiamente supportato che prevede l'invio di una rappresentazione della password dell'utente, anziché della password stessa, durante il processo di autenticazione. Tramite questo protocollo, il server di accesso remoto invia una richiesta di verifica al client di accesso remoto. Il client di accesso remoto utilizza un algoritmo hash, detto anche funzione hash, per calcolare un risultato hash MD5 (Message Digest-5) basato sulla richiesta di verifica e un risultato hash calcolato dalla password dell'utente. Il client di accesso remoto invia il risultato hash MD5 al server di accesso remoto, il quale, potendo accedere anche al risultato hash della password dell'utente, esegue lo stesso calcolo utilizzando l'algoritmo hash e confronta il risultato con quello inviato dal client. Se i risultati coincidono, le credenziali del client di accesso remoto vengono considerate autentiche. Un algoritmo hash fornisce una crittografia unidirezionale. In tal modo, il calcolo del risultato hash per un blocco di dati risulta semplice, mentre è matematicamente impossibile determinare il blocco di dati originale a partire dal risultato hash.<br /><br /><img src='../uploads/Uni/md5.jpg' alt='' title='' /><br /><img src='../uploads/Uni/md51.jpg' alt='' title='' /><br />(from Microsoft and Roberto Sassi)<br /><br />
<strong>2.</strong><br />Il portmapper RPC è un demone che agisce sulla porta 111 e che converte i numeri del programma RPC in numeri di porta del protocollo TCP/IP (o UDP/IP). Deve essere in funzione al fine di eseguire chiamate RPC ai server RPC su quella macchina. Quando un server RPC è in esecuzione, comunica a portmap su quale numero di porta è in ascolto e quali numeri di programmi RPC è pronto a servire. Quando un client desidera fare una chiamata RPC ad un dato numero di programma, prima contatta portmap sulla macchina server al fine di determinare il numero della porta dove i pacchetti RPC potranno essere inviati.<br /><br />
<strong>3.</strong><br />Una query diretta si ha quando passo un NOME al DNS, e questi mi risponde con un  indirizzo IP: è la <strong>risoluzione</strong> del nome.
Una query inversa invece la ottengo passando un indirizzo IP al DNS, e ricevendo il nome associato a quell'indirizzo: è la <strong>risoluzione inversa</strong>.
</p>
<p class='vspace'>Il comando <strong>nslookup</strong> è abbastanza furbo da interpretare ciò che gli viene passato come argomento. Se gli passo un nome di sito, mi restituisce l'IP. Se gli passo un IP, mi restituisce il nome di quel sito.
</p>
<p class='vspace'>Esempio:
</p>
<p class='vspace'>nslookup 159.149.70.1
</p>
<div class='vspace'></div><hr />
<p class='vspace'><a class='wikilink' href='Sistemi.html'>Torna alla pagina di Sistemi per l'elaborazione delle informazioni</a>
</p>
</div>

  <div id='printfoot'>
    <div class='printview'>(Printable View of <span style='white-space:nowrap;'>http://www.swappa.it/wiki/Uni/TemiEsameSED08)</span></div>
  </div>
</body>
</html>
