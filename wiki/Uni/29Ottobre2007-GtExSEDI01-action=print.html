<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
 <title>Swappa : Uni / Esercizi di Sistemi - 29 Ottobre 2007</title>
 <meta http-equiv='Content-Type' content='text/html; charset=ISO-8859-1' />
 <meta http-equiv='Content-Language' content='en' />
 <meta http-equiv='Content-Style-Type' content='text/css' />
 <meta http-equiv="imagetoolbar" content="no" />
 <meta name='MSSmartTagsPreventParsing' content='true' />
 <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
.progress-bar {
	display: block;
	background: transparent; 
	width: 520px;
	font-size: 1px; /* for IE */
	margin: 2px 0;
}

.progress-bar .pb1, .progress-bar .pb2, .progress-bar .pb3, .progress-bar .pb4 {
	display: block; 
	background: #fff; 
	border-left:  1px solid #999; 
	border-right: 1px solid #999;

	overflow: hidden; 
	height: 1px; 
}
.progress-bar .pb1 { margin: 0 4px; background: #999;}
.progress-bar .pb2 { margin: 0 2px; border-width: 0 2px; }
.progress-bar .pb3 { margin: 0 1px; }
.progress-bar .pb4 { height: 11px; padding: 0 3px; }
.progress-bar .pb5 { display: block; background: #eeeeef; overflow:hidden; }

.progress-bar .bar {
	display: block;
	background: #a5bbd8;
	height: 11px;
	padding: 0;
}
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>
  <link rel='stylesheet' href='../pub/wsplus/wsplus.css' 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url('http://www.swappa.it/wiki/pub/wsplus/csshover.htc'); }
    .rollover * { visibility: visible; }
  </style><![endif]-->
<script type='text/javascript' src='../pub/syntaxlove/scripts/shCore.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCSharp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCpp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushJava.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPerl.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPhp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPython.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushRuby.js'></script> <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shCore.css'/>
  <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shThemeDefault.css'/>
  <script type='text/javascript'>
  	SyntaxHighlighter.config.clipboardSwf = 'http://www.swappa.it/wiki/pub/syntaxlove/scripts/clipboard.swf';
  	SyntaxHighlighter.all();
  </script>  <meta name='robots' content='noindex,nofollow' />

 <style type='text/css'><!--

/* Default Fonts */
body { font-family: Verdana,Arial,Helvetica,sans-serif; }
body, td, th { color:#000000; }
body, td, th { font-size: 10pt; }
small { font-size:0.85em; }
code { white-space: nowrap; }
h1, h2, h3, h4, h5 { margin-top:1em; margin-bottom:0.6em; }
h1 { font-size: 1.9em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }
h4 { font-size: 1.06em; }
h5 { font-size: 1.0em; }
ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }

/* Misc. */
body { width:auto; background-color:#ffffff; margin:0px; padding:0.5em; }
img { border-width: 0px; }
.indent { margin-left:30px; }
.outdent { margin-left:30px; text-indent:-30px; }
.vspace { margin-top:1.33em; }

/* Links */
a:link { color:#333333; font-weight:normal; text-decoration:underline; }
a:visited { color:#333333; font-weight:normal; text-decoration:underline; }
a.wikilink:hover { color: #333333; text-decoration:underline; }
a.createlink { text-decoration:none; position:relative; top:-0.5em; font-weight:bold; font-size:smaller; border-bottom:none; }
a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
a.varlink { text-decoration:none; }
.apprlink { font-size:smaller; }

/* Print View Page Header */
#printhead { font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }
#printhead a, #printhead a:visited { font-weight:bold; text-decoration:none; }
#cc { float:right; font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }

/* Print View Page Footer */
#printfoot { font-family: Arial,Helvetica,Geneva,sans-serif; margin-top:1em; border-top:2px solid #a0a0a0; font-size:7pt; }
  
 --></style>
</head>
<body>
  <div id='printhead'>
    <a href='../index.html' title='Swappa Home'>Swappa</a> :
    <a href='http://www.swappa.it/wiki/Uni' title='Uni Home'>Uni</a> /
    <a href='29Ottobre2007-GtExSEDI01.html' title='Esercizi di Sistemi - 29 Ottobre 2007'>Esercizi di Sistemi - 29 Ottobre 2007</a>
    <div id='cc'>
	<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">
	<img alt="Creative Commons License" style="border-width:0" height="15" width="80" src="http://i.creativecommons.org/l/by-nc-sa/2.5/it/80x15.png" />
	</a>
    </div>
  </div>
  
<!--PageText-->
<div id='wikitext'>
<p>
<a class='wikilink' href='Sistemi.html'>Torna alla pagina di Sistemi per l'elaborazione delle informazioni</a>
</p><hr />
<div class='vspace'></div><pre  style='text-align: center; background-color: #ffe4c4; border: 2px solid #cccccc; font-size: 13pt; padding: 5px;'> <strong>:: Esercizi di Sistemi - 29 Ottobre 2007 ::</strong>
</pre><div class='vspace'></div><h2>Header di 2° e 3° livello</h2>
<p>Ho una rete siffatta:
</p>
<div class='vspace'></div><div><img src='../uploads/Uni/reteExSEDI1.jpg' alt='' title='' /></div>
<p class='vspace'>Le lettere maiuscole (A, B, C, D, E, H) indicano gli indirizzi MAC, mentre le lettere minuscole corrispondenti sono gli indirizzi IP.
</p>
<p class='vspace'>La stazione A vuole mandare un messaggio alla stazione H. Dobbiamo scrivere l'header di livello 2 (Ethernet) e quello di livello 3 (IP) per il mio bel pacchetto.
</p>
<div class='vspace'></div><h3>Soluzione</h3>
<ul><li>da A a B: mittente IP = a, destinatario IP = h; mittente MAC = A, destinatario MAC = B
</li><li>da C a D: mitt IP = a, dest IP = h; mitt MAC = C, dest MAC = D
</li><li>da E a H: mitt IP = a, dest IP = h; mitt MAC = E, dest MAC = h
</li></ul><div class='vspace'></div><h3>Commento</h3>
<p>Innanzitutto, occorre notare che gli indirizzi IP del mittente e del destinatario rimangono uguali per tutta la traversata delle nostre reti. Il motivo è semplice: gli IP identificano i nostri host, e non c'è ragione per fargli cambiare l'indirizzo.
</p>
<p class='vspace'>L'unico caso in cui invece si sarebbe dovuto cambiare l'indirizzo avverrebbe nel caso in cui a metà rete ci fosse un NAT. Il NAT dovrebbe modificare l'indirizzo di origine mettendoci il suo.
Per ipotesi, il NAT è il router D-E, in cui D sta sulla rete privata, mentre E ha un indirizzo pubblico. In questo caso, per fare NAT, cioè Network Address Translation, il router avrebbe <em>cambiato</em> l'indirizzo del mittente mettendoci il suo proprio indirizzo, così che H, in un'eventuale risposta, avrebbe inviato pacchetti a D-E e non direttamente ad A. Questo perché A sta su una rete privata (supponiamo 192.168.x.x) e le reti private non possono affacciarsi direttamente ad Internet.
</p>
<p class='vspace'>Una nota aggiuntiva sul NAT è questa: il server D-E avrebbe <em>cambiato</em> la porta di origine. Noi sappiamo (?) che l'header TCP permette di specificare una porta. D-E, per non confondere gli indirizzi della rete privata, aggiunge ad ogni porta un certo numero, così che quando poi il pacchetto torna indietro dall'esame della porta sa risalire all'host privato che lo ha mandato in origine. Questo sistema è meglio spiegato nelle lezioni.
</p>
<div class='vspace'></div><h2>Cache ARP</h2>
<p>Un host di IP <em>A</em> e MAC <em>a</em> si immette su una rete. Che cosa succede? La prima cosa che fa è mandare un messaggio broadcast ARP dicendo: "<em>Io ho l'IP A e il MAC a</em>". Gli altri ricevereanno, e sulle loro cache ARP private aggiungeranno una voce che assegnerà il MAC <em>a</em> all'IP <em>A</em>. Quando poi vorranno comunicare con <em>A</em>, gli manderanno pacchetti con indirizzo appropriato, e <em>A</em> a sua volta potrà costruirsi la propria tabella ARP.
</p>
<p class='vspace'>Da notare che ARP funziona <em>solo</em> su reti Ethernet, perché si appoggia sul broadcast Ethernet.
</p>
<div class='vspace'></div><h2>Frammentazione</h2>
<p>In un'ipotetica rete c'è un frame di 210 ottetti, di cui 10 di header. Ho un pacchetto di 400 ottetti. Devo specificare lo header IP che cambia a causa della frammentazione.
</p>
<p class='vspace'>Il bit detto MORE, che indica che il frame è seguito da un'altro frame per completarlo, è impostato a 1 nel primo frame, e a 0 nel 2° frame. Questo perché il primo frame va seguito da un altro, mentre il secondo frame no.
</p>
<p class='vspace'>L'offset avrà valore 0 nel primo frame, e valore 200 nel secondo frame. Questo perché il secondo frame va assemblato a partire dalla posizione 200.
</p>
<div class='vspace'></div><h2>Sottoreti</h2>
<p>Gli indirizzi <strong>192.168.23.87/26</strong> e <strong>192.168.23.67/26</strong> sono sulla stessa sottorete?
</p>
<div class='vspace'></div><h3>Risposta, primo sistema</h3>
<p>Il <strong>/26</strong> mi dice che prendo i primi due bit del quarto ottetto. Bene. Scriviamo quindi il quarto ottetto di entrambi gli indirizzi:
</p><ul><li>87 =&gt; <strong>01</strong>010111
</li><li>67 =&gt; <strong>01</strong>000011
</li></ul><p class='vspace'>Come si può vedere, i primi due bit sono <em>uguali</em> in entrambi i casi. Ne consegue che i due indirizzi giacciono (oh che bel verbo) sulla stessa rete.
</p>
<div class='vspace'></div><h3>Risposta, secondo sistema</h3>
<p>Ricavo la sottorete su cui giace (sì mi piace sto verbo!) <strong>192.168.23.87/26</strong>.
Come prima, prendo i primi due bit del quarto ottetto e deduco che la rete è <strong>192.168.23.64/26</strong>. La maschera di sottorete è 255.255.255.192. L'indirizzo di broadcast lo ottengo mettendo a 1 tutti i 6 bit che ci sono dopo i 2 di prefisso: <strong>01111111</strong> =&gt; 192.168.23.127. Il minimo indirizzo di host è 192.168.23.65. Il massimo indirizzo di host è 192.168.23.126. Vedo subito che 192.168.23.67 è compreso in questo intervallo, quindi è nella stessa sottorete.
</p>
<div class='vspace'></div><h2>Sottoreti bis</h2>
<p>Ho gli indirizzi <strong>128.37.23.100</strong> e <strong>128.37.22.150</strong>. La maschera di sottorete è <strong>255.255.254.0</strong>. Sono sulla stessa sottorete?
</p>
<div class='vspace'></div><h3>Risposta</h3>
<p>Notiamo subito che specificare la maschera di sottorete oppure la notazione CIDR è la stessa cosa.
</p>
<p class='vspace'>254 nel terzo ottetto sarebbe <em>'11111110</em>. Quindi, uso i primi 7 bit, e gli indirizzi saranno quindi 128.37.23.100/23.
Vediamo come scrivere il 23 del terzo ottetto del primo indirizzo, <strong>128.37.23.100</strong>. Ottengo <strong>00010111</strong>. 22 invece si scrive <strong>00010110</strong>. Come si vede, i primi 7 bit di questi due numeri sono uguali, e pertanto gli indirizzi pertengono alla stessa rete. La forma verbale <em>pertengono</em> deriva da <em>pertenere</em> e non so né se sia corretta, né se sia appropriata.
</p>
<p class='vspace'>Vogliamo essere noiosi e scrivere i vari dati di questa sottorete? Sì, lo vogliamo.
</p><ul><li>Indirizzo di host minimo: il terzo ottetto sarebbe <strong>00010110</strong>, il quarto <strong>00000001</strong> =&gt; 128.37.22.1
</li><li>Indirizzo di host massimo: il terzo ottetto mi dà <strong>00010111</strong>, il quarto <strong>11111110</strong> =&gt; 128.37.23.254
</li><li>Numero totale di host: sostanzialmente ho 2 reti da 256 l'uno =&gt; 256 * 2 = 512. Tolgo 2 indirizzi non validi (quelli formati da tutti 0 o tutti 1) e ho 510 host totali.
</li><li>Indirizzo di broadcast: 128.37.23.255
</li><li>Numero di donne nude: 0.
</li></ul><div class='vspace'></div><h2>VLSM</h2>
<p>Ho 3 subnet, una con 125 hosts, e le altre 2 con 60 hosts ciascuna. Il netid disponibile è <strong>223.1.17 / 24</strong>. Come vedete manca l'ultimo ottetto, perché è a mia completa disposizione.
</p>
<p class='vspace'>Per prima cosa, cerchiamo di far saltar fuori un subnet per la subnet più grossa, quella che ha 125 hosts. 128, cioè 2^7, contiene 125, quindi dovremo dividere il nostro classe C in due parti: <strong>223.1.17.0/25</strong> e <strong>223.1.17.1/25</strong>. Notate subito che <em>stiamo usando</em> anche la netid con valore tutto a 0. Altrimenti non ne verremmo fuori più. Quindi, la rete da 125 sarà questa: <strong>223.1.17.0/25</strong>, e la maschera di sottorete sarà <strong>255.255.255.128</strong>.
</p>
<p class='vspace'>Le altre due reti le metto in due ulteriori suddivisioni della seconda rete che ho ottenuto qui sopra. In particolare, prendo un altro bit per net id e ottengo <strong>223.1.17.128/26</strong> e <strong>223.1.17.192/26</strong>. Ognuna contiene 64 - 2 hosts, e quindi sufficienti per i miei 60. La maschera di sottorete di queste due subnet sarà <strong>255.255.255.192</strong>.
</p>
<p class='vspace'>NOTA: qui risultano evidenti due cose. La prima è che suddividendo il classe C in questo modo ci sta sì tutto, ma siamo tirati per il collo e non c'è spazio per eventuali espansioni del sistema. La seconda è che emerge un'altra limitazione del VLSM: non posso avere partizioni superiori alla metà di uno spazio di indirizzamento. Questo perché ogni partizione divide in due ciò che ho già. Non posso dividere in 3, o in partizioni asimmetriche.
</p>
<div class='vspace'></div><hr />
<p><a class='wikilink' href='Sistemi.html'>Torna alla pagina di Sistemi per l'elaborazione delle informazioni</a>
</p>
</div>

  <div id='printfoot'>
    <div class='printview'>(Printable View of <span style='white-space:nowrap;'>http://www.swappa.it/wiki/Uni/29Ottobre2007-GtExSEDI01)</span></div>
  </div>
</body>
</html>
