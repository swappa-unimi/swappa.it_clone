<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
 <title>Swappa : Uni / Traduttori - Lezione del 3 marzo 2009</title>
 <meta http-equiv='Content-Type' content='text/html; charset=ISO-8859-1' />
 <meta http-equiv='Content-Language' content='en' />
 <meta http-equiv='Content-Style-Type' content='text/css' />
 <meta http-equiv="imagetoolbar" content="no" />
 <meta name='MSSmartTagsPreventParsing' content='true' />
 <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
.progress-bar {
	display: block;
	background: transparent; 
	width: 520px;
	font-size: 1px; /* for IE */
	margin: 2px 0;
}

.progress-bar .pb1, .progress-bar .pb2, .progress-bar .pb3, .progress-bar .pb4 {
	display: block; 
	background: #fff; 
	border-left:  1px solid #999; 
	border-right: 1px solid #999;

	overflow: hidden; 
	height: 1px; 
}
.progress-bar .pb1 { margin: 0 4px; background: #999;}
.progress-bar .pb2 { margin: 0 2px; border-width: 0 2px; }
.progress-bar .pb3 { margin: 0 1px; }
.progress-bar .pb4 { height: 11px; padding: 0 3px; }
.progress-bar .pb5 { display: block; background: #eeeeef; overflow:hidden; }

.progress-bar .bar {
	display: block;
	background: #a5bbd8;
	height: 11px;
	padding: 0;
}
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>
  <link rel='stylesheet' href='../pub/wsplus/wsplus.css' 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url('http://www.swappa.it/wiki/pub/wsplus/csshover.htc'); }
    .rollover * { visibility: visible; }
  </style><![endif]-->
<script type='text/javascript' src='../pub/syntaxlove/scripts/shCore.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCSharp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCpp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushJava.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPerl.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPhp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPython.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushRuby.js'></script> <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shCore.css'/>
  <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shThemeDefault.css'/>
  <script type='text/javascript'>
  	SyntaxHighlighter.config.clipboardSwf = 'http://www.swappa.it/wiki/pub/syntaxlove/scripts/clipboard.swf';
  	SyntaxHighlighter.all();
  </script>  <meta name='robots' content='noindex,nofollow' />

 <style type='text/css'><!--

/* Default Fonts */
body { font-family: Verdana,Arial,Helvetica,sans-serif; }
body, td, th { color:#000000; }
body, td, th { font-size: 10pt; }
small { font-size:0.85em; }
code { white-space: nowrap; }
h1, h2, h3, h4, h5 { margin-top:1em; margin-bottom:0.6em; }
h1 { font-size: 1.9em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }
h4 { font-size: 1.06em; }
h5 { font-size: 1.0em; }
ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }

/* Misc. */
body { width:auto; background-color:#ffffff; margin:0px; padding:0.5em; }
img { border-width: 0px; }
.indent { margin-left:30px; }
.outdent { margin-left:30px; text-indent:-30px; }
.vspace { margin-top:1.33em; }

/* Links */
a:link { color:#333333; font-weight:normal; text-decoration:underline; }
a:visited { color:#333333; font-weight:normal; text-decoration:underline; }
a.wikilink:hover { color: #333333; text-decoration:underline; }
a.createlink { text-decoration:none; position:relative; top:-0.5em; font-weight:bold; font-size:smaller; border-bottom:none; }
a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
a.varlink { text-decoration:none; }
.apprlink { font-size:smaller; }

/* Print View Page Header */
#printhead { font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }
#printhead a, #printhead a:visited { font-weight:bold; text-decoration:none; }
#cc { float:right; font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }

/* Print View Page Footer */
#printfoot { font-family: Arial,Helvetica,Geneva,sans-serif; margin-top:1em; border-top:2px solid #a0a0a0; font-size:7pt; }
  
 --></style>
</head>
<body>
  <div id='printhead'>
    <a href='../index.html' title='Swappa Home'>Swappa</a> :
    <a href='http://www.swappa.it/wiki/Uni' title='Uni Home'>Uni</a> /
    <a href='Trad030309.html' title='Traduttori - Lezione del 3 marzo 2009'>Traduttori - Lezione del 3 marzo 2009</a>
    <div id='cc'>
	<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">
	<img alt="Creative Commons License" style="border-width:0" height="15" width="80" src="http://i.creativecommons.org/l/by-nc-sa/2.5/it/80x15.png" />
	</a>
    </div>
  </div>
  
<!--PageText-->
<div id='wikitext'>
<p>
</p><pre  style='text-align: center; background-color: #ffe4c4; border: 2px solid #cccccc; font-size: 13pt; padding: 5px;'> <strong>:: Traduttori - Lezione del 3 marzo 2009 ::</strong>
</pre><div class='vspace'></div><h2>Cos'è un Linguaggio di Programmazione?</h2>
<p>Un Linguaggio di Programmazione, d'ora in poi abbreviato con LDP, non è facilmente definibile così, a ufo. Una definizione un po' più  formale è questa:
</p><pre> Un LDP è una definizione di come devono essere scritte le istruzioni
 per fare eseguire delle funzioni all'elaboratore.
</pre><p>Oppure:
</p><pre> Un LDP è uno strumento per fare eseguire all'elaboratore funzioni
 ad 1 livello più elevato rispetto all'hw sottostante.
</pre><p class='vspace'>Perché c'è la necessità di un livello intermedio tra programmatore e elaboratore? L'elaboratore ragiona in termini di 0 e 1 e, quando va bene, di linguaggio macchina (chi avesse nostalgia di queste cose vada a vedere il <a class='wikilink' href='TettyMixal.html'>MIXAL</a>). Dagli esiti dell'esame di <a class='wikilink' href='ProgrammazioneElaboratori.html'>Programmazione degli Elaboratori</a> si può comprendere come scrivere in linguaggio macchina non solo sia difficile, ma porta anche a commettere un sacco di errori. Un linguaggio a più alto livello permette di specificare bene il problema senza diventare matti.
</p>
<p class='vspace'>Per essere ancora più formali, possiamo dire che un LDP è un
</p><pre> insieme di regole che definiscono  un insieme di stringhe legali,
 dando ad ognuna di esse un preciso significato.
</pre><p class='vspace'>Questo insieme di stringhe è detto <strong>programma</strong>: un LDP definisce quindi che cosa è un programma valido, e che cosa invece no.
</p>
<p class='vspace'>Notiamo subito che in questa definizione non c'entra niente l'hardware sottostante: un LDP di per sé prescinde dall'hw.<br />Ma non sarà del tutto indipendente da esso: alcune fasi di traduzione da LDP a linguaggio macchina saranno diverse a seconda dell'architettura dell'HW. Pensiamo ad esempio alla rappresentazioni dei valori: alcuni processori partono dal bit più significativo, altri da quello meno significativo. Alcuni processori permettono un certo valore massimo agli interi, altri processori un altro etc.
</p>
<p class='vspace'>Compare subito un problema: le combinazioni di stringhe possibili sono potenzialmente infinite. Come fa un programma finito a stabilire se una qualsiasi tra queste combinazioni infinite è accettabile?
</p>
<div class='vspace'></div><h2>Due approcci</h2>
<p>Quest'ultima domanda apre la strada ad una nuova visione del problema. Ci sono due approcci, che si sono mixati finora: l<strong>'approccio generativo</strong> e l<strong>'approccio riconoscitivo</strong>.
</p>
<p class='vspace'>L'approccio generativo mi dice <em>come</em> costruire istruzioni valide. Lo si può intendere come il manuale di un linguaggio di programmazione, che mi dice come scrivere espressioni e così via.
</p>
<p class='vspace'>L'approccio riconoscitivo invece sta dall'altra parte della barricata: dato un insieme di stringhe, mi deve dire se sono valide o meno.
</p>
<p class='vspace'>Le <strong>grammatiche formali</strong>, che vedremo nelle prossime lezioni, permettono un approccio a questi approcci.
</p>
<div class='vspace'></div><h2>I traduttori</h2>
<h3>L'interprete</h3>
<p>Fermo restando che un programma è un input, che deve produrre un output nel mio elaboratore, e che quindi tra input e output ci sta la macchina, l<strong>'interprete</strong> si pone come layer intermedio tra l'input, l'output e la macchina.
</p>
<p class='vspace'>In pratica, un interprete prende le frasi del linguaggio di programmazione, una alla volta, le traduce e le dà in pasto all'elaboratore per produrre l'output.
</p>
<div class='vspace'></div><h3>Il compilatore</h3>
<p>Il compilatore invece non prende le frasi una alla volta: prende <em>tutto</em> il programma, e attraverso una sequenza di fasi più complesse porta al codice eseguibile.
</p>
<p class='vspace'>In particolare, deve tradurre il tutto in linguaggio macchina, collegare questa rappresentazione di linguaggio macchina alle librerie utilizzate, e generare l'eseguibile. Qualche passaggio in più.
</p>
<div class='vspace'></div><h3>Front-End e Back-End</h3>
<p>Interprete e Traduttore si comportano in modo diverso, ma la prima parte è uguale per tutti e due: devono riconoscere una stringa valida. Ecco quello che deve fare un traduttore:
</p><ol><li>occorre una definizione di un LDP (una sequenza di simboli appartenenti ad un alfabeto)
</li><li>occorre una grammatica per vedere se le combinazioni di simboli sono legittime
</li><li>occorre stabilire se queste combinazioni hanno senso o no
</li><li>occorre vedere se ci sono errori semantici e poterli notificare all'utente
</li></ol><p class='vspace'>Tutte queste cose assumeranno maggiore chiarezza in futuro, ma quello che già ora possiamo dire è che un traduttore traduce da un codice sorgente scritto in un certo LDP in un codice macchina semanticamente equivalente. Semanticamente equivalente vuol dire che fa quello che gli ho detto di fare:)
</p>
<p class='vspace'>Possiamo quindi dividere un traduttore in due parti: un <strong>frontend</strong> ed un <strong>backend</strong>.
</p>
<p class='vspace'><strong>Frontend</strong>: deve fare analisi lessicale, sintattica e semantica.<br /><strong>Backend</strong>: genera  il codice macchina.
</p>
<p class='vspace'>Il frontend è la parte "uguale" per tutti i traduttori, mentre il backend è la parte che dipende dalla macchina su cui eseguire il codice.
</p>
<div class='vspace'></div><h3>Analisi lessicale</h3>
<p>L'analisi lessicale è eseguita dallo <strong>scanner</strong>. Questo prende il programma, lo scandisce carattere per carattere, e raggruppa i caratteri in parole, numeri e simboli.
</p>
<p class='vspace'>Gli <strong>elementi lessicali</strong> sono detti lessemi, e sono i raggruppamenti di simboli riconosciuti.
</p>
<p class='vspace'>La categoria cui appartiene un dato lessema è detta invece <strong>token</strong>.
</p>
<p class='vspace'>Per fare un esempio, prendiamo la stringa
</p><pre> a = b + c;
</pre><p class='vspace'>Gli elementi lessicali saranno i seguenti: <strong>a</strong>, <strong>=</strong>, <strong>b</strong>, <strong>+</strong>, <strong>c</strong>, <strong>;</strong>.<br />Poi, a ciascun lessema verrà associato un <strong>token</strong>, cioè una categoria:
</p><ul><li><strong>a</strong>, <strong>b</strong> e <strong>c</strong> sono identificatori
</li><li><strong>=</strong> e <strong>+</strong> sono operatori
</li><li><strong>;</strong> è  un segno di punteggiatura
</li></ul><p class='vspace'>Ogni linguaggio in genera avrà delle regole a questo livello. Ad esempio, gli identificatori non possono essere più lunghi di 30 caratteri, non possono cominciare per un numero e così via.
</p>
<div class='vspace'></div><h3>Analizzatore sintattico</h3>
<p>L'analizzatore sintattico mi dice se la struttura del programma sia ammissibile nel mio LDP.
</p>
<p class='vspace'>Ad esempio, una stringa come <strong>a b c = +;</strong> può essere digerita dallo scanner, il quale troverà tranquillamente tre identificatori, due operatori e un segno di punteggiatura.
</p>
<p class='vspace'>Ma, se stiamo scrivendo in C, questa roba non ha senso, e sarà l'analizzatore sintattico a scoprirlo.
</p>
<p class='vspace'>Quello che produce è l' <strong>albero sintattico</strong>, anche detto <strong>parse tree</strong>. In quest'albero, le foglie sono i lessemi, mentre i nodi intermedi sono i token, ovvero le categorie qui il lessema appartiene.
</p>
<p class='vspace'>Questo parse tree mi permette anche di stabilire proprietà strane come la precedenza e l'associatività degli operatori. Appena ho un disegno lo posto, così si capisce bene questa faccenda.
</p>
<div class='vspace'></div><h3>Analizzatore semantico</h3>
<p>Una volta stabilita la mia struttura sintattica, devo capire che significato ha. La tabella dei simboli, generata precedentemente, viene arricchita con nuove informazioni, e si produce del <strong>codice intermedio</strong> (già passibile di eventuale ottimizzazione).
</p>
<p class='vspace'>Ad esempio, prendiamo la riga C:
</p><pre> int a, b, v, x, y;
</pre><p class='vspace'>L'analizzatore sintattico dice che è tutto OK. Quello semantico invece fa un ulteriore controllo: deve vedere se è lecito, in quel punto del programma, definire dei nuovi interi con quei nomi (se sono già stati definiti nello stesso scope, non si può fare).<br />
Nella stringa
</p><pre> x = y + a * b * 2;
</pre><p class='vspace'>invece controllerà se i tipi degli identificatori sono compatibili tra di loro e con gli operatori segnati.
</p>
<p class='vspace'>Ecco come compare una tabella dei simboli, cui si fa appello per vedere chi è cosa:
</p>
<div class='vspace'></div><table border='0' cellpadding='5' cellspacing='0' >
<tr ><td  valign='top'> <strong>nome</strong>
</td><td  valign='top'> <strong>tipo</strong>
</td><td  valign='top'> <strong>offset</strong>
</td></tr><tr ><td  valign='top'> a
</td><td  valign='top'> int
</td><td  valign='top'> 0
</td></tr><tr ><td  valign='top'> b
</td><td  valign='top'> int
</td><td  valign='top'> 4
</td></tr><tr ><td  valign='top'> v
</td><td  valign='top'> int
</td><td  valign='top'> 8
</td></tr><tr ><td  valign='top'> x
</td><td  valign='top'> int
</td><td  valign='top'> 12
</td></tr><tr ><td  valign='top'> y
</td><td  valign='top'> int
</td><td  valign='top'> 16
</td></tr></table>
<p class='vspace'>La colonna <strong>offset</strong> mi dice l'indirizzo dell'identificatore a partire dal primo blocco di memoria allocata.
</p>
<p class='vspace'>Ed ecco invece che aspetto può avere il codice intermedio. Prendiamo queste due righe:
</p><pre> x = y + a * b * 2;
 v = x;
</pre><p class='vspace'>Il codice intermedio sarà così:
</p><pre> t1 = a * b
 t2 = t1 * 2
 t3 = y * t2
 x = t3
 v = x
</pre><p>Rispetta la precedenza tra operatori, e questo dipende dalla bontà con cui è stato costruito il parse tree.
</p>
<p class='vspace'>Per dare un'idea delle ottimizzazioni già possibili a questo livello, l'analizzatore semantico potrebbe vedere che la variabile x non viene più usata, dopo quella riga. Pertanto, il codice intermedio salterebbe l'associazione <strong>x = t3</strong>, e metterebbe invece <strong>v = t3</strong>.
</p>
<div class='vspace'></div><hr />
<p><a class='wikilink' href='Traduttori.html'>Torna alla pagina di Traduttori</a>
</p>
</div>

  <div id='printfoot'>
    <div class='printview'>(Printable View of <span style='white-space:nowrap;'>http://www.swappa.it/wiki/Uni/Trad030309)</span></div>
  </div>
</body>
</html>
