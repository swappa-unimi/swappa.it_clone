<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
 <title>Swappa : Uni / La verità sul go-back-n</title>
 <meta http-equiv='Content-Type' content='text/html; charset=ISO-8859-1' />
 <meta http-equiv='Content-Language' content='en' />
 <meta http-equiv='Content-Style-Type' content='text/css' />
 <meta http-equiv="imagetoolbar" content="no" />
 <meta name='MSSmartTagsPreventParsing' content='true' />
 <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
.progress-bar {
	display: block;
	background: transparent; 
	width: 520px;
	font-size: 1px; /* for IE */
	margin: 2px 0;
}

.progress-bar .pb1, .progress-bar .pb2, .progress-bar .pb3, .progress-bar .pb4 {
	display: block; 
	background: #fff; 
	border-left:  1px solid #999; 
	border-right: 1px solid #999;

	overflow: hidden; 
	height: 1px; 
}
.progress-bar .pb1 { margin: 0 4px; background: #999;}
.progress-bar .pb2 { margin: 0 2px; border-width: 0 2px; }
.progress-bar .pb3 { margin: 0 1px; }
.progress-bar .pb4 { height: 11px; padding: 0 3px; }
.progress-bar .pb5 { display: block; background: #eeeeef; overflow:hidden; }

.progress-bar .bar {
	display: block;
	background: #a5bbd8;
	height: 11px;
	padding: 0;
}
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>
  <link rel='stylesheet' href='../pub/wsplus/wsplus.css' 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url('http://www.swappa.it/wiki/pub/wsplus/csshover.htc'); }
    .rollover * { visibility: visible; }
  </style><![endif]-->
<script type='text/javascript' src='../pub/syntaxlove/scripts/shCore.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCSharp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCpp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushJava.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPerl.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPhp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPython.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushRuby.js'></script> <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shCore.css'/>
  <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shThemeDefault.css'/>
  <script type='text/javascript'>
  	SyntaxHighlighter.config.clipboardSwf = 'http://www.swappa.it/wiki/pub/syntaxlove/scripts/clipboard.swf';
  	SyntaxHighlighter.all();
  </script>  <meta name='robots' content='noindex,nofollow' />

 <style type='text/css'><!--

/* Default Fonts */
body { font-family: Verdana,Arial,Helvetica,sans-serif; }
body, td, th { color:#000000; }
body, td, th { font-size: 10pt; }
small { font-size:0.85em; }
code { white-space: nowrap; }
h1, h2, h3, h4, h5 { margin-top:1em; margin-bottom:0.6em; }
h1 { font-size: 1.9em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }
h4 { font-size: 1.06em; }
h5 { font-size: 1.0em; }
ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }

/* Misc. */
body { width:auto; background-color:#ffffff; margin:0px; padding:0.5em; }
img { border-width: 0px; }
.indent { margin-left:30px; }
.outdent { margin-left:30px; text-indent:-30px; }
.vspace { margin-top:1.33em; }

/* Links */
a:link { color:#333333; font-weight:normal; text-decoration:underline; }
a:visited { color:#333333; font-weight:normal; text-decoration:underline; }
a.wikilink:hover { color: #333333; text-decoration:underline; }
a.createlink { text-decoration:none; position:relative; top:-0.5em; font-weight:bold; font-size:smaller; border-bottom:none; }
a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
a.varlink { text-decoration:none; }
.apprlink { font-size:smaller; }

/* Print View Page Header */
#printhead { font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }
#printhead a, #printhead a:visited { font-weight:bold; text-decoration:none; }
#cc { float:right; font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }

/* Print View Page Footer */
#printfoot { font-family: Arial,Helvetica,Geneva,sans-serif; margin-top:1em; border-top:2px solid #a0a0a0; font-size:7pt; }
  
 --></style>
</head>
<body>
  <div id='printhead'>
    <a href='../index.html' title='Swappa Home'>Swappa</a> :
    <a href='http://www.swappa.it/wiki/Uni' title='Uni Home'>Uni</a> /
    <a href='SEDI-GBN.html' title='La verità sul go-back-n'>La verità sul go-back-n</a>
    <div id='cc'>
	<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">
	<img alt="Creative Commons License" style="border-width:0" height="15" width="80" src="http://i.creativecommons.org/l/by-nc-sa/2.5/it/80x15.png" />
	</a>
    </div>
  </div>
  
<!--PageText-->
<div id='wikitext'>
<p>
</p><pre  style='text-align: center; background-color: #ffe4c4; border: 2px solid #cccccc; font-size: 13pt; padding: 5px;'> <strong>:: La verità sul go-back-n ::</strong>
</pre><div class='vspace'></div><h2>Breve introduzione</h2>
<p>Il protocollo TCP ha il concetto di connessione, ovvero i due host che vogliono scambiarsi dei files devono mettersi d'accordo su ciò. Inoltre, a differenza di UDP, prevede un controllo d'errore, ovvero se c'è qualche pacchetto o frammento rovinato, va reinviato. L'host destinatario risponde ad ogni pacchetto ricevuto con un messaggio ACK che si riferisce al segmento che si attende di ricevere in seguito. Questo vuol dire che se mi arriva il segmento 2, rispondo dicendo che mi attendo il segmento 3, e il mittente capisce che il 2 gli è arrivato. In caso un segmento arrivi danneggiato (il ricevente se ne accorge tramite il CRC) allora il ricevente invia un messaggio NACK relativo a quel segmento.
</p>
<div class='vspace'></div><h2>Sistemi per il reinvio di segmenti</h2>
<p>Ci sono fondamentalmente 2 scuole di pensiero riguardo al reinvio di segmenti. La prima si chiama <em>idle RQ</em>, la seconda <em>continuous RQ</em>. Entrambe utilizzano un timer: ad ogni segmento inviato, faccio partire un timer, e se entro la scadenza del timer non mi arriva una risposta, reinvio quel segmento.
</p>
<div class='vspace'></div><h3>Idle RQ</h3>
<p>Mando un segmento, e attendo l'ACK. Poi mando il secondo segmento, e attendo l'ACK del secondo. Funziona, ma è estremamente lento, perché nei tempi in cui il mittente attende l'ACK, non manda niente: la linea rimane vuota.
</p>
<div class='vspace'></div><h3>Continuous RQ</h3>
<p>Qui invece la questione cambia: invio tanti pacchetti di fila, senza bisogno di attendere l'ACK. In questo modo ho sempre la banda piena. Il numero di pacchetti che posso inviare senza bisogno di ricevere l'ACK si chiama <em>finestra </em>. Inviati tutti i pacchetti della mia finestra, attendo tutti gli ACK, e poi comincio ad inviare una nuova finestra. Qui il gioco sta quindi nel capire quando spostare la finestra, di quanto, e che fare in caso di errore.
</p>
<p class='vspace'>Supponiamo che la finestra abbia dimensione 4. Il mittente, che chiamo M, invia 4 segmenti di fila senza curarsi di quello che succede. Il ricevente si chiama R. Quando riceve il segmento 1 (comincio a contare da 1 e non da 0 per comodità) invia l'ACK di 1 (che come ho detto sopra conterrà un messaggio che dice: mi attendo il segmento 2). Quando riceve il segmento 2, invia l'ACK di 2 e così via fino all'ACK di 4.
</p>
<p class='vspace'>Che cosa fa M allora? Non appena riceve ACK 1 sposta a destra di uno la finestra. Quindi, se prima la finestra conteneva i segmenti 1 - 2 - 3 - 4, ora la finestra contiene 2 - 3 - 4 - 5. Quando arriva ACK 2, sposta la finestra di un altro segmento: 3 - 4 - 5 - 6.
</p>
<div class='vspace'></div><h3>Selective Repeat</h3>
<p>Supponiamo che a R arrivino tutti i 4 segmenti TRANNE il segmento 2: invierà l'ACK di tutti quanti ma non del 2. R manterrà in memoria TUTTI i segmenti e si ricorderà che il 2 non è arrivato. Alla fine della trasmissione M reinvia il 2 e fa avanzare la finestra.
</p>
<p class='vspace'>Il vantaggio è che la rete viene usata in modo ottimale, ma il problema è che il ricevente deve mantenere in memoria tutti i segmenti, e può essere costoso in termini di memoria sulla scheda di rete o robe simili.
</p>
<div class='vspace'></div><h3>go-back-n</h3>
<p>I problemi di trasmissione possono essere di diversi tipi: 1) non arriva l'ACK perché si perde; 2) il frame arriva corrotto e R risponde con NACK (il contrario di ACK).
</p>
<p class='vspace'>Nel caso 1, occorre vedere quale dei 4 ACK che mi aspetto non arriva. Se non arriva l'ACK del primo, ma l'ACK del secondo, o nel caso peggiore solo l'ACK del 4°, la procedura go-back-n assume che tutti i segmenti precedenti siano stati ricevuti con successo. Perché? Perché si è stabilito che dopo aver ricevuto un segmento danneggiato, il ricevente risponda con NACK e <em>non invii più nessun tipo di messaggio</em>. Ma se arriva l'ACK del 4 segmento, vuol dire che sono tutti arrivati bene, anche se gli ACK sono arrivati male, altrimenti in caso di errore il destinatario non avrebbe mai potuto inviare l'ACK del 4 perché si sarebbe fermato prima.
</p>
<p class='vspace'>Che cosa succede alla finestra? Mi arriva solo l'ACK del 4 segmento. Io so che il 4 segmento è l'ultimo della mia finestra, e che la finestra è lunga 4 =&gt; sposto a destra la finestra di 4 elementi. Se mi arriva solo l'ACK del 3 , allora sposto la finestra di 3 e così via. 
</p>
<p class='vspace'>In caso di timer scaduto, ovvero attendo un ACK e non mi arriva, riparto da quel segmento il cui timer è scaduto. Se arriva un NACK, riparto dal segmento il cui NACK è arrivato in poi. Quindi la finestra e la lista di ritrasmissione (cioè i segmenti che devo tenere in memoria perché potrei doverli reinviare a breve) sono gestite dinamicamente in questo modo.
</p>
<p class='vspace'>La dimensione della finestra in generale non è statica. Viene negoziata tra 2 hosts in modo tale che il mittente possa inviare tanti segmenti quanti ne posso inviare nel tempo in cui un  segmento ci mette a lasciare il mittente ed arrivare al destinatario. Il parametro che ho in mano in genere si chiama RTT, cioè <em>Round Trip Time</em>, ovvero <em>tempo di andata &amp; ritorno</em>. Una volta ottenuto questo tempo, faccio in modo di inviare tanti segmenti quanti ne servono per tenere occupata la linea per questo RTT.
</p>
<p class='vspace'>Ciò vuol dire che se RTT è 10 secondi, allora per 10 secondi invio pacchetti, così che quando ho finito di mandare l'ultimo pacchetto dovrebbe arrivare subito l'ACK del primo.
</p>
<div class='vspace'></div><hr />
<p><a class='wikilink' href='Sistemi.html'>Torna alla pagina di Sistemi per l'elaborazione delle informazioni</a>
</p>
</div>

  <div id='printfoot'>
    <div class='printview'>(Printable View of <span style='white-space:nowrap;'>http://www.swappa.it/wiki/Uni/SEDI-GBN)</span></div>
  </div>
</body>
</html>
