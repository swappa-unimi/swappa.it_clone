<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
 <title>Swappa : Uni / Ricerca Operativa - PNL - 7 novembre 2007</title>
 <meta http-equiv='Content-Type' content='text/html; charset=ISO-8859-1' />
 <meta http-equiv='Content-Language' content='en' />
 <meta http-equiv='Content-Style-Type' content='text/css' />
 <meta http-equiv="imagetoolbar" content="no" />
 <meta name='MSSmartTagsPreventParsing' content='true' />
 <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
.progress-bar {
	display: block;
	background: transparent; 
	width: 520px;
	font-size: 1px; /* for IE */
	margin: 2px 0;
}

.progress-bar .pb1, .progress-bar .pb2, .progress-bar .pb3, .progress-bar .pb4 {
	display: block; 
	background: #fff; 
	border-left:  1px solid #999; 
	border-right: 1px solid #999;

	overflow: hidden; 
	height: 1px; 
}
.progress-bar .pb1 { margin: 0 4px; background: #999;}
.progress-bar .pb2 { margin: 0 2px; border-width: 0 2px; }
.progress-bar .pb3 { margin: 0 1px; }
.progress-bar .pb4 { height: 11px; padding: 0 3px; }
.progress-bar .pb5 { display: block; background: #eeeeef; overflow:hidden; }

.progress-bar .bar {
	display: block;
	background: #a5bbd8;
	height: 11px;
	padding: 0;
}
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>
  <link rel='stylesheet' href='../pub/wsplus/wsplus.css' 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url('http://www.swappa.it/wiki/pub/wsplus/csshover.htc'); }
    .rollover * { visibility: visible; }
  </style><![endif]-->
<script type='text/javascript' src='../pub/syntaxlove/scripts/shCore.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCSharp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCpp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushJava.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPerl.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPhp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPython.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushRuby.js'></script> <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shCore.css'/>
  <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shThemeDefault.css'/>
  <script type='text/javascript'>
  	SyntaxHighlighter.config.clipboardSwf = 'http://www.swappa.it/wiki/pub/syntaxlove/scripts/clipboard.swf';
  	SyntaxHighlighter.all();
  </script>  <meta name='robots' content='noindex,nofollow' />

 <style type='text/css'><!--

/* Default Fonts */
body { font-family: Verdana,Arial,Helvetica,sans-serif; }
body, td, th { color:#000000; }
body, td, th { font-size: 10pt; }
small { font-size:0.85em; }
code { white-space: nowrap; }
h1, h2, h3, h4, h5 { margin-top:1em; margin-bottom:0.6em; }
h1 { font-size: 1.9em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }
h4 { font-size: 1.06em; }
h5 { font-size: 1.0em; }
ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }

/* Misc. */
body { width:auto; background-color:#ffffff; margin:0px; padding:0.5em; }
img { border-width: 0px; }
.indent { margin-left:30px; }
.outdent { margin-left:30px; text-indent:-30px; }
.vspace { margin-top:1.33em; }

/* Links */
a:link { color:#333333; font-weight:normal; text-decoration:underline; }
a:visited { color:#333333; font-weight:normal; text-decoration:underline; }
a.wikilink:hover { color: #333333; text-decoration:underline; }
a.createlink { text-decoration:none; position:relative; top:-0.5em; font-weight:bold; font-size:smaller; border-bottom:none; }
a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
a.varlink { text-decoration:none; }
.apprlink { font-size:smaller; }

/* Print View Page Header */
#printhead { font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }
#printhead a, #printhead a:visited { font-weight:bold; text-decoration:none; }
#cc { float:right; font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }

/* Print View Page Footer */
#printfoot { font-family: Arial,Helvetica,Geneva,sans-serif; margin-top:1em; border-top:2px solid #a0a0a0; font-size:7pt; }
  
 --></style>
</head>
<body>
  <div id='printhead'>
    <a href='../index.html' title='Swappa Home'>Swappa</a> :
    <a href='http://www.swappa.it/wiki/Uni' title='Uni Home'>Uni</a> /
    <a href='RO-PNL-7novembre2007.html' title='Ricerca Operativa - PNL - 7 novembre 2007'>Ricerca Operativa - PNL - 7 novembre 2007</a>
    <div id='cc'>
	<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">
	<img alt="Creative Commons License" style="border-width:0" height="15" width="80" src="http://i.creativecommons.org/l/by-nc-sa/2.5/it/80x15.png" />
	</a>
    </div>
  </div>
  
<!--PageText-->
<div id='wikitext'>
<p>
</p><pre  style='text-align: center; background-color: #ffe4c4; border: 2px solid #cccccc; font-size: 13pt; padding: 5px;'> <strong>:: Ricerca Operativa - PNL - 7 novembre 2007 ::</strong>
</pre><div class='vspace'></div><h2>Testo</h2>
<p>Nel sottosuolo della città bisogna scavare un tunnel rettilineo per la nuova linea della metropolitana. Esso dovrà essere poi collegato tramite altri tunnel secondari alle uscite, collocate in alcune piazze già identificate, che ovviamente non sono tutte perfettamente allineate. Si vuole definire la posizione del tunnel in modo da minimizzare la lunghezza degli scavi dei tunnel secondari, cioè in modo da minimizzare la somma delle distanze tra il tunnel principale e le uscite.
</p>
<p class='vspace'>Formulare il problema, classificarlo e risolverlo con i dati del file TUNNEL.TXT.<br />Discutere poi l&#8217;ottimalità della soluzione ottenuta.
</p>
<p class='vspace'>[Suggerimento: la distanza di un punto (x0,y0) da una retta ax+by+c=0 è data da |ax0+by0+c| / sqrt(a<sup>2</sup>+b<sup>2</sup>) ]
</p>
<div class='vspace'></div><pre class='escaped'>
Le piazze sono localizzate nel piano cartesiano nei punti seguenti:

Piazza   X   Y
   1   -10  14
   2    -8   7
   3    -5  10
   4    -3  10
   5     0   9
   6     2   8
   7     5   8
   8     8   7
   9     9   5
  10    11   6
  11    14   7
  12    16   5
</pre>
<div class='vspace'></div><h2>Soluzione</h2>
<h3>Dati</h3>
<p>I dati che abbiamo in mano sono solo le coordinate delle piazze, e il numero delle piazze:
</p><ul><li>N = 12 : numero delle piazze
</li><li>coord<sub>ij</sub>, i=1..12, j=1..2 : coordinata della piazza (ogni piazza ha due valori, la x e la y). L'unità di misura non credo che ci sia...
</li></ul><div class='vspace'></div><h3>Variabili</h3>
<p>Il problema ci chiede di identificare una retta. Una retta ha equazione <strong>ax + by + c</strong>. In partenza avrei messo tutte e 5 ste robe, cioè <strong>a</strong>, <strong>b</strong>, <strong>c</strong>, <strong>x</strong> e <strong>y</strong>, come variabili. Ma in realtà <strong>x</strong> e <strong>y</strong> non servono mai, si usano solo <strong>a</strong>, <strong>b</strong> e <strong>c</strong>, come spiegato nella formula per calcolare la distanza che il prof ci ha dato.
</p><ul><li>a, b, c: variabili libere (infatti una retta può essere inclinata come vogliamo, i suoi coefficienti possono essere &lt; 0)
</li></ul><div class='vspace'></div><h3>Funzione obiettivo</h3>
<p>La funzione obiettivo è minimizzare la distanza dei tunnel secondari che vanno dalla nostra retta alle piazze di coordinate note. Quindi, devo
</p><ol><li>trovare la distanza tra ogni piazza e il tunnel
</li><li>minimizzare la somma di queste distanza
</li></ol><p class='vspace'>min SOMMA<sub>i</sub> distanza(tunnel, piazza(i)), per ogni i = 1..N
</p>
<p class='vspace'>Notiamo anche che la distanza richiede un valore assoluto. Il trucco per avere un valore assoluto è questo: introdurre una funzione ausiliaria ed imporle questi vincoli:
</p><ul><li>delta &gt; qualcosa
</li><li>delta &gt; -qualcosa
</li></ul><p>Il <em>qualcosa</em> di cui stiamo parlando è l'equazione che il professore ci ha dato. Lui ha infatti scritto:
</p>
<p class='vspace'>|ax0+by0+c| / sqrt(a<sup>2</sup>+b<sup>2</sup>)
</p>
<p class='vspace'>Noi vogliamo il valore assoluto di <strong>a*x<sub>i</sub> + b*y<sub>i</sub> + c</strong>. Per ogni piazza, ci serve il valore assoluto di questa distanza, pertanto...
</p>
<div class='vspace'></div><h3>Variabili strikes back!</h3>
<p>...introduciamo un'altra variabile ausiliaria, delta, che sarà indicizzata con il numero delle piazze:
</p><ul><li>delta<sub>i</sub>, i=1..N : distanza in valore assoluti dalla piazza i-esima al tunnel
</li></ul><div class='vspace'></div><h3>Torniamo alla funzione obiettivo</h3>
<p>Ora che abbiamo la variabile ausiliaria, facciamo così:<br />Per ogni i-esima piazza, delta<sub>i</sub> deve essere il valore assoluto della prima parte dell'equazione della distanza.<br />La nostra funzione obiettivo diventa quindi:
</p>
<div class='vspace'></div><pre class='escaped'>
min = @sum(piazza(i): delta(i) / sqrt(a'^2^'+b'^2^'));

@for(piazza(i): delta(i) &gt; a*x(i) + b*y(i) + c);
@for(piazza(i): delta(i) &gt; 0 - (a*x(i) + b*y(i) + c));
</pre>
<div class='vspace'></div><h3>Vincoli</h3>
<p>L'unico vincolo esistente è quello che serve per definire il delta; per il resto, le variabili sono libere di fare quello che vogliono.
</p>
<div class='vspace'></div><h3>Codice Lingo</h3>
<pre class='escaped'>
model:

sets:
piazza /1..12/: x, y, delta;
retta /1..1/: a, b, c;
endsets

data:
x = -10 -8 -5 -3 0 2 5 8 9 11 14 16;
y = 14  7 10 10 9 8 8 7 5  6  7  5;

enddata

!Funzione obiettivo;
min = @sum(piazza(i): delta(i) / ((a(1))^2 + (b(1))^2)^0.5);

!Funzione ausiliaria delta per il valore assoluto;
@for(piazza(i): delta(i) &gt; (a(1) * x(i) + b(1)*y(i) + c(1)));
@for(piazza(i): delta(i) &gt; 0 - (a(1) * x(i) + b(1)*y(i) + c(1)));

! Dichiariamo libere le variabili;
@free(a(1));
@free(b(1));
@free(c(1));

end
</pre>
<div class='vspace'></div><h4>Nota sul codice</h4>
<p>Qui ho introdotto il set <strong>retta</strong> con le proprietà <strong>a</strong>, <strong>b</strong> e <strong>c</strong>. In realtà NON È affatto necessario, perché Lingo quello che non viene definito lo assume come variabile.
</p>
<div class='vspace'></div><h3>Discussione sull'ottimalità</h3>
<p>Mmmm... dalla teoria, si sa che l'ottimo trovato di una roba non lineare è locale, e che questo locale coincide con il globale se la funzione è convessa. La domanda è quindi: la funzione è convessa?
</p>
<p class='vspace'>La risposta è sì: la distanza di un punto da una retta variabile è una roba convessa: c'è un esatto punto che ha un minimo, e tutto il resto non lo è. Ho tante funzioni convesse, e la somma di funzioni convesse è a sua volta una funzione convessa. Quindi, il problema è convesso, e l'ottimo locale è anche globale.
</p>
<div class='vspace'></div><hr />
<p><a class='wikilink' href='RicercaOperativa.html'>Torna alla pagina di Ricerca Operativa</a>
</p>
</div>

  <div id='printfoot'>
    <div class='printview'>(Printable View of <span style='white-space:nowrap;'>http://www.swappa.it/wiki/Uni/RO-PNL-7novembre2007)</span></div>
  </div>
</body>
</html>
