<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
 <title>Swappa : Uni / Header IPv4</title>
 <meta http-equiv='Content-Type' content='text/html; charset=ISO-8859-1' />
 <meta http-equiv='Content-Language' content='en' />
 <meta http-equiv='Content-Style-Type' content='text/css' />
 <meta http-equiv="imagetoolbar" content="no" />
 <meta name='MSSmartTagsPreventParsing' content='true' />
 <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
.progress-bar {
	display: block;
	background: transparent; 
	width: 520px;
	font-size: 1px; /* for IE */
	margin: 2px 0;
}

.progress-bar .pb1, .progress-bar .pb2, .progress-bar .pb3, .progress-bar .pb4 {
	display: block; 
	background: #fff; 
	border-left:  1px solid #999; 
	border-right: 1px solid #999;

	overflow: hidden; 
	height: 1px; 
}
.progress-bar .pb1 { margin: 0 4px; background: #999;}
.progress-bar .pb2 { margin: 0 2px; border-width: 0 2px; }
.progress-bar .pb3 { margin: 0 1px; }
.progress-bar .pb4 { height: 11px; padding: 0 3px; }
.progress-bar .pb5 { display: block; background: #eeeeef; overflow:hidden; }

.progress-bar .bar {
	display: block;
	background: #a5bbd8;
	height: 11px;
	padding: 0;
}
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>
  <link rel='stylesheet' href='../pub/wsplus/wsplus.css' 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url('http://www.swappa.it/wiki/pub/wsplus/csshover.htc'); }
    .rollover * { visibility: visible; }
  </style><![endif]-->
<script type='text/javascript' src='../pub/syntaxlove/scripts/shCore.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCSharp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCpp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushJava.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPerl.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPhp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPython.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushRuby.js'></script> <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shCore.css'/>
  <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shThemeDefault.css'/>
  <script type='text/javascript'>
  	SyntaxHighlighter.config.clipboardSwf = 'http://www.swappa.it/wiki/pub/syntaxlove/scripts/clipboard.swf';
  	SyntaxHighlighter.all();
  </script>  <meta name='robots' content='noindex,nofollow' />

 <style type='text/css'><!--

/* Default Fonts */
body { font-family: Verdana,Arial,Helvetica,sans-serif; }
body, td, th { color:#000000; }
body, td, th { font-size: 10pt; }
small { font-size:0.85em; }
code { white-space: nowrap; }
h1, h2, h3, h4, h5 { margin-top:1em; margin-bottom:0.6em; }
h1 { font-size: 1.9em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }
h4 { font-size: 1.06em; }
h5 { font-size: 1.0em; }
ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }

/* Misc. */
body { width:auto; background-color:#ffffff; margin:0px; padding:0.5em; }
img { border-width: 0px; }
.indent { margin-left:30px; }
.outdent { margin-left:30px; text-indent:-30px; }
.vspace { margin-top:1.33em; }

/* Links */
a:link { color:#333333; font-weight:normal; text-decoration:underline; }
a:visited { color:#333333; font-weight:normal; text-decoration:underline; }
a.wikilink:hover { color: #333333; text-decoration:underline; }
a.createlink { text-decoration:none; position:relative; top:-0.5em; font-weight:bold; font-size:smaller; border-bottom:none; }
a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
a.varlink { text-decoration:none; }
.apprlink { font-size:smaller; }

/* Print View Page Header */
#printhead { font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }
#printhead a, #printhead a:visited { font-weight:bold; text-decoration:none; }
#cc { float:right; font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }

/* Print View Page Footer */
#printfoot { font-family: Arial,Helvetica,Geneva,sans-serif; margin-top:1em; border-top:2px solid #a0a0a0; font-size:7pt; }
  
 --></style>
</head>
<body>
  <div id='printhead'>
    <a href='../index.html' title='Swappa Home'>Swappa</a> :
    <a href='http://www.swappa.it/wiki/Uni' title='Uni Home'>Uni</a> /
    <a href='HeaderIPv4.html' title='Header IPv4'>Header IPv4</a>
    <div id='cc'>
	<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">
	<img alt="Creative Commons License" style="border-width:0" height="15" width="80" src="http://i.creativecommons.org/l/by-nc-sa/2.5/it/80x15.png" />
	</a>
    </div>
  </div>
  
<!--PageText-->
<div id='wikitext'>
<p>
<a class='wikilink' href='Sistemi.html'>Torna alla pagina di Sistemi per l'elaborazione delle informazioni</a>
</p><hr />
<div class='vspace'></div><pre  style='text-align: center; background-color: #ffe4c4; border: 2px solid #cccccc; font-size: 13pt; padding: 5px;'> <strong>:: Header IPv4 ::</strong>
</pre><p class='vspace'>Quando un'applicazione deve inviare dei dati ad un'altra il software TCP/IP interviene <strong>suddividendo l'informazione da inviare in una sequenza di pacchetti IP</strong>. Ciascuno di questi pacchetti è etichettato con uno header fisso, che include l'indirizzo IP dell’interfaccia mittente e di quella di destinazione. Lo header specifica anche la lunghezza totale del pacchetto con un campo di 16 bit; <strong>la dimensione massima di un pacchetto IP è quindi di 64 Kbyte</strong>. L'indirizzo IP è indirizzo software a 32 bit e deve essere specificato dal mittente.
</p>
<p class='vspace'>Tra parentesi quadre la dimensione in bit dei vari campi.
</p>
<div class='vspace'></div><table border='1' cellpadding='5' cellspacing='0' width='90%' align='center' >
<tr ><td bgcolor='#f5f9fc' align='center'  valign='top'> <a href='#Versione'>Versione</a> [4]
</td><td bgcolor='#f5f9fc' align='center'  valign='top'> <a href='#IHL'>IHL</a> [4]
</td><td bgcolor='#f5f9fc' align='center'  valign='top'> <a href='#TServizio'>Tipo di servizio</a> [8]
</td><td bgcolor='#f5f9fc' colspan='2' align='center'  valign='top'> <a href='#LTotale'>Lunghezza totale</a> [16]
</td></tr><tr ><td bgcolor='#f5f9fc' colspan='3' align='center'  valign='top'> <a href='#IDDatagram'>ID del datagramma</a> [16]
</td><td bgcolor='#f5f9fc' align='center'  valign='top'> <a href='#Flag'>Flag</a> [3]
</td><td bgcolor='#f5f9fc' align='center'  valign='top'> <a href='#OFram'>Offset di frammentazione</a> [13]
</td></tr><tr ><td bgcolor='#f5f9fc' colspan='2' align='center'  valign='top'> <a href='#TTL'>Time to live</a> [8]
</td><td bgcolor='#f5f9fc' align='center'  valign='top'> <a href='#Protocollo'>Protocollo</a> [8]
</td><td bgcolor='#f5f9fc' colspan='2' align='center'  valign='top'> <a href='#Checksum'>Checksum dello header</a> [16]
</td></tr><tr ><td bgcolor='#f5f9fc' colspan='5' align='center'  valign='top'> <a href='#IPS'>Indirizzo IP sorgente</a> [32]
</td></tr><tr ><td bgcolor='#f5f9fc' colspan='5' align='center'  valign='top'> <a href='#IPD'>Indirizzo IP destinazione</a> [32]
</td></tr><tr ><td bgcolor='#f5f9fc' colspan='3' align='center'  valign='top'> <a href='#Opzioni'>Opzioni</a>
</td><td bgcolor='#f5f9fc' colspan='2' align='center'  valign='top'> <a href='#Padding'>Padding</a>
</td></tr><tr ><td height='100px' valign='middle' colspan='5' align='center' > Dati
</td></tr></table> <br />
<p><a name='Versione' id='Versione'></a>
</p><h2>Versione</h2>
<p>Indica la versione attuale del pacchetto (datagramma) IP. La versione usata attualmente è la 4, detta <em>IPv4</em>, destinata ad essere sostituita (forse nel 2025) dalla <em>IPv6</em>.
</p>
<p class='vspace'><a name='IHL' id='IHL'></a>
</p><h2>IHL</h2>
<p>L' <strong>IHL</strong> (<strong>I</strong>nternet <strong>H</strong>eader <strong>L</strong>enght) indica la lunghezza dell'header IP, espressa in <strong>parole</strong> (<em>word</em>) da 32 bit. Generalmente vengono utilizzate 5 parole, che possono aumentare fino a 15 nel caso in cui sia presente il campo <a href='#Opzioni'>Opzioni</a>.
</p>
<p class='vspace'><a name='TServizio' id='TServizio'></a>
</p><h2>Tipo di servizio</h2>
<p>Permette all'host mittente di specificare il modo e la precedenza con cui l'host ricevente dovrà trattare il pacchetto. Questi bit servivano all'host mittente per specificare il modo e in particolare la precedenza con cui l'host ricevente doveva trattare il datagramma:
</p>
<div class='vspace'></div><pre>    * bit 0-2 : Precedenza
    * bit 3: Latenza (0 = normale, 1 = bassa)
    * bit 4: Throughput (0 = normale, 1 = alto)
    * bit 5: Affidabilità (0 = normale, 1 = alta)
    * bit 6-7: Riservati per usi futuri
</pre><p class='vspace'><a name='LTotale' id='LTotale'></a>
</p><h2>Lunghezza totale</h2>
<p>Riporta la dimensione dell'intero pacchetto, header e dati inclusi, esprimendola in byte. 
</p>
<p class='vspace'><a name='IDDatagram' id='IDDatagram'></a>
</p><h2>ID del datagramma</h2>
<p>Insieme all'indirizzo mittente, consente di identificare univocamente il pacchetto nel caso in cui debba essere frammentato durante la trasmissione.
</p>
<p class='vspace'><a name='Flag' id='Flag'></a>
</p><h2>Flag</h2>
<p>Sono tre flag, uno per bit, utilizzati per il controllo del protocollo e della frammentazione del datagramma:
</p><ul><li><strong>DF</strong> (<em>Don't fragment</em>): se è a 1 il datagramma non può essere frammentato (in particolare, se non può essere inviato ad un altro host senza essere frammentato, viene scartato dal router, che genera un messaggio ICMP al mittente), se è a 0 sì.
</li><li><strong>MF</strong> (<em>More fragment</em>): indica se il datagramma ricevuto è l'ultimo di una serie di frammenti o se ce ne sono altri. Se è l'ultimo (o se il pacchetto non è stato frammentato), MF avrà valore 0.
</li><li><strong>Reserved</strong>: sempre settato a 0.
</li></ul><p class='vspace'><a name='OFram' id='OFram'></a>
</p><h2>Offset di frammentazione</h2>
<p>Rappresenta lo spiazzamento (<em>offset</em>) espresso in byte di un frammento rispetto all'inizio del pacchetto originale. Quindi, ad esempio, il primo frammento avrà offset pari a 0. Può essere impostato dai router che effettuano la frammentazione. Se il pacchetto è frammentato, il secondo frammento partirà dal bit successivo alla fine del primo frammento.<br />(<em>Esempio</em> una linea supporta un frame di 512 byte, ho un pacchetto di 900 byte. In quanti pacchetti verrà frammentato? Come si presenterà l'offset di frammentazione?
Risposta: verrà frammentato in 2 pacchetti: l'offset del primo sarà <em>0</em>, quello del secondo sarà <em>512</em>)
</p>
<p class='vspace'><a name='TTL' id='TTL'></a>
</p><h2>Time to live</h2>
<p>E' il numero di hop, ovvero i router che il pacchetto può attraversare. Ogni volta che attraversa un router questo tempo viene diminuito di uno. Quando il TTL arriva a zero il pacchetto non viene più inoltrato ma scartato se non è arrivato a destinazione. Tipicamente, quando un datagramma viene scartato per esaurimento del TTL, viene automaticamente inviato un messaggio ICMP al mittente del datagramma, specificando il codice di Richiesta scaduta; la ricezione di questo messaggio ICMP è alla base del meccanismo di traceroute.
</p>
<p class='vspace'><a name='Protocollo' id='Protocollo'></a>
</p><h2>Protocollo</h2>
<p>Permette di risalire al protocollo utilizzato nel campo dati del pacchetto, utilizzando un codice per indicarlo. Ad esempio il protocollo ICMP ha valore 1, IGMP ha 2, TCP ha 6 e UDP 17.
</p>
<p class='vspace'><a name='Checksum' id='Checksum'></a>
</p><h2>Checksum dello header</h2>
<p>E' usato per il controllo degli errori nello header. Ad ogni hop che il pacchetto si trova ad attraversare, il suo valore di checksum deve essere confrontato con la somma in complemento a 1 dei bit dell'header stesso; se il confronto dà esito negativo (i due valori sono diversi) allora il pacchetto viene scartato. Ne consegue che tutti i router che modificano il pacchetto, devono aggiornare il suo valore di checksum.
</p>
<p class='vspace'>In soldoni, come avviene il controllo dell'errore? 
</p><ol><li>si sommano in complemento a 1 tutti i bit dello header, organizzati in parole da 16 bit l'una, e con il valore del campo checksum settato a 0 (perché? perché non posso fare una somma utilizzando come addendo la somma stessa!)
</li><li>si complementa a 1 il risultato di tale somma (si fa dunque il NOT binario)
</li><li>si confronta il valore ottenuto con quello presente nel campo checksum dell'header del pacchetto ricevuto
</li></ol><p class='vspace'><a name='IPS' id='IPS'></a>
</p><h2>Indirizzo IP sorgente</h2>
<p>Indica l'indirizzo IP del mittente del pacchetto.
</p>
<p class='vspace'><a name='IPD' id='IPD'></a>
</p><h2>Indirizzo IP destinazione</h2>
<p>Indica l'indirizzo IP del destinatario del pacchetto.
</p>
<p class='vspace'><a name='Opzioni' id='Opzioni'></a>
</p><h2>Opzioni</h2>
<p>E' un campo facoltativo e comunque non viene usato molto spesso. Consente di aumentare la lunghezza dell'header di 5 parole.
</p>
<p class='vspace'><a name='Padding' id='Padding'></a>
</p><h2>Padding</h2>
<p>...
</p>
<p class='vspace'>Per conoscere le dimensioni degli header ecco una mini-guida: <a class='urllink' href='../uploads/Uni/nomefile.pdf' title='' rel='nofollow'>Attach:nomefile.pdf</a>
</p><hr />
<p><a class='wikilink' href='Sistemi.html'>Torna alla pagina di Sistemi per l'elaborazione delle informazioni</a>
</p>
</div>

  <div id='printfoot'>
    <div class='printview'>(Printable View of <span style='white-space:nowrap;'>http://www.swappa.it/wiki/Uni/HeaderIPv4)</span></div>
  </div>
</body>
</html>
