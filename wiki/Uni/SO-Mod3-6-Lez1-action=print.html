<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
 <title>Swappa : Uni / Sistemi Operativi - Appunti caotici</title>
 <meta http-equiv='Content-Type' content='text/html; charset=ISO-8859-1' />
 <meta http-equiv='Content-Language' content='en' />
 <meta http-equiv='Content-Style-Type' content='text/css' />
 <meta http-equiv="imagetoolbar" content="no" />
 <meta name='MSSmartTagsPreventParsing' content='true' />
 <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
.progress-bar {
	display: block;
	background: transparent; 
	width: 520px;
	font-size: 1px; /* for IE */
	margin: 2px 0;
}

.progress-bar .pb1, .progress-bar .pb2, .progress-bar .pb3, .progress-bar .pb4 {
	display: block; 
	background: #fff; 
	border-left:  1px solid #999; 
	border-right: 1px solid #999;

	overflow: hidden; 
	height: 1px; 
}
.progress-bar .pb1 { margin: 0 4px; background: #999;}
.progress-bar .pb2 { margin: 0 2px; border-width: 0 2px; }
.progress-bar .pb3 { margin: 0 1px; }
.progress-bar .pb4 { height: 11px; padding: 0 3px; }
.progress-bar .pb5 { display: block; background: #eeeeef; overflow:hidden; }

.progress-bar .bar {
	display: block;
	background: #a5bbd8;
	height: 11px;
	padding: 0;
}
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>
  <link rel='stylesheet' href='../pub/wsplus/wsplus.css' 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url('http://www.swappa.it/wiki/pub/wsplus/csshover.htc'); }
    .rollover * { visibility: visible; }
  </style><![endif]-->
<script type='text/javascript' src='../pub/syntaxlove/scripts/shCore.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCSharp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCpp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushJava.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPerl.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPhp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPython.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushRuby.js'></script> <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shCore.css'/>
  <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shThemeDefault.css'/>
  <script type='text/javascript'>
  	SyntaxHighlighter.config.clipboardSwf = 'http://www.swappa.it/wiki/pub/syntaxlove/scripts/clipboard.swf';
  	SyntaxHighlighter.all();
  </script>  <meta name='robots' content='noindex,nofollow' />

 <style type='text/css'><!--

/* Default Fonts */
body { font-family: Verdana,Arial,Helvetica,sans-serif; }
body, td, th { color:#000000; }
body, td, th { font-size: 10pt; }
small { font-size:0.85em; }
code { white-space: nowrap; }
h1, h2, h3, h4, h5 { margin-top:1em; margin-bottom:0.6em; }
h1 { font-size: 1.9em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }
h4 { font-size: 1.06em; }
h5 { font-size: 1.0em; }
ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }

/* Misc. */
body { width:auto; background-color:#ffffff; margin:0px; padding:0.5em; }
img { border-width: 0px; }
.indent { margin-left:30px; }
.outdent { margin-left:30px; text-indent:-30px; }
.vspace { margin-top:1.33em; }

/* Links */
a:link { color:#333333; font-weight:normal; text-decoration:underline; }
a:visited { color:#333333; font-weight:normal; text-decoration:underline; }
a.wikilink:hover { color: #333333; text-decoration:underline; }
a.createlink { text-decoration:none; position:relative; top:-0.5em; font-weight:bold; font-size:smaller; border-bottom:none; }
a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
a.varlink { text-decoration:none; }
.apprlink { font-size:smaller; }

/* Print View Page Header */
#printhead { font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }
#printhead a, #printhead a:visited { font-weight:bold; text-decoration:none; }
#cc { float:right; font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }

/* Print View Page Footer */
#printfoot { font-family: Arial,Helvetica,Geneva,sans-serif; margin-top:1em; border-top:2px solid #a0a0a0; font-size:7pt; }
  
 --></style>
</head>
<body>
  <div id='printhead'>
    <a href='../index.html' title='Swappa Home'>Swappa</a> :
    <a href='http://www.swappa.it/wiki/Uni' title='Uni Home'>Uni</a> /
    <a href='SO-Mod3-6-Lez1.html' title='Sistemi Operativi - Appunti caotici'>Sistemi Operativi - Appunti caotici</a>
    <div id='cc'>
	<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">
	<img alt="Creative Commons License" style="border-width:0" height="15" width="80" src="http://i.creativecommons.org/l/by-nc-sa/2.5/it/80x15.png" />
	</a>
    </div>
  </div>
  
<!--PageText-->
<div id='wikitext'>
<p>
<a class='wikilink' href='SistemiOperativi.html'>Torna alla pagina di Sistemi Operativi</a>
</p><hr />
<div class='vspace'></div><pre  style='text-align: center; background-color: #ffe4c4; border: 2px solid #cccccc; font-size: 13pt; padding: 5px;'> <strong>:: Appunti caotici ::</strong>
</pre><p class='vspace'  style='text-align: center;'><span  style='background-color: #d9e4f2; font-size: 11pt; padding: 4px; padding-left: 50px; padding-right: 50px;'>Lezione 1</span>
<span  style='background-color: #d9e4f2; font-size: 11pt; padding: 4px; padding-left: 50px; padding-right: 50px;'>Caratterizzazione del deadlock</span>
</p>
<div class='vspace'></div><h2>Pag 1</h2>
<h4>Sommario</h4>
<p>...
</p>
<div class='vspace'></div><h2>Pag 2</h2>
<h4>Uso di risorse condivise</h4>
<p>Il fenomeno degli stalli ricorre quando più processi vogliono accedere contemporaneamente a risorse condivise.
</p>
<div class='vspace'></div><h4>Problema del deadlock</h4>
<p>Il disegnetto rappresenta la strettoia in una via a doppio senso di marcia.
</p>
<div class='vspace'></div><h2>Pag 3</h2>
<h4>Condizioni per il verificarsi del deadlock</h4>
<p>Si ha deadlock se si verificano simultaneamente le seguenti condizioni:
</p><ul><li>mutua esclusione (mutual exclusion), altrimenti la risposta potrebbe dare risposte con informazioni non consistenti
</li><li>possesso e attesa (hold &amp; wait)
</li><li>no rilascio anticipato (no pre-emption). Con la pre-emption non avrei deadlock, dal momento che non potrei bloccare l'accesso alla risorsa: chi l'ha in uno la cede immediatamente a chi la chiede
</li><li>attesa circolare (circular wait), ovvero un processo detiene una risorsa richiesta da un altro processo che richiede a sua volta una risorsa detenuta da un altro processo che...
</li></ul><p class='vspace'>Se anche una sola di queste quattro condizioni non è verificata contemporaneamente allora non ho deadlock.
</p>
<div class='vspace'></div><h4>Grafo di allocazione delle risorse (1)</h4>
<p>Per verificare la sussistenza di un deadlock viene utilizzato il grafo di allocazione delle risorse, coi nodi che rappresentano processi P e risorse R, a gli archi che rappresentano richieste (da P a R) o assegnazione (da R a P) di risorse. Per convenzione i nodi P son rappresentati con cerchi e le risorse con rettangoli, all'interno dei quali possono esserci più pallini che rappresentano le istanze di sé stesse che mettono a disposizione (nessun pallino equivale ad un'unica istanza).
</p>
<div class='vspace'></div><h2>Pag 4</h2>
<h4>Grafo di allocazione delle risorse (2)</h4>
<p>Il grafo a sinistra rappresenta una situazione senza deadlock. In particolare:
</p><ul><li>P1 ha richiesto R1, ma P2 l'aveva fatto prima di lui e infatti gli è stato assegnato l'accesso. 
</li><li>R2 mette a disposizione due istanze, che pur essendo identiche possono essere usate in parallelo. Non ho conflitti dato che il principio di mutua esclusione si applica solo sulla stessa istanza
</li><li>P3 spezza la possibilità di formare un'attesa circolare. Non ha infatti richieste pendenti su altre risorse già occupate, quindi una volta terminato l'utilizzo di R3, lo rilascerà sbloccando P2 (e per propagazione anche P1)
</li></ul><p class='vspace'>Il grafo a destra rappresenta invece una situazione con deadlock. Si può infatti notare che si è formato un ciclo di attese tra P3, P2, R3 ed R2, con P2 e P3 che rimarrebbero indefinitamente bloccati. Gli altri processi potrebbero teoricamente andare avanti tranquillamente, a meno che prima o poi non abbiano bisogno di accedere alle risorse bloccate dal ciclo. Ad esempio nel nostro grafo P1 non potrà mai usare R1, dato che P2 si è bloccato e non lo rilascerà mai. Anche P1 quindi, pur non essendo direttamente coinvolto in un ciclo, è in situazione di stallo.
</p>
<div class='vspace'></div><h4>Grafo di allocazione delle risorse (3)</h4>
<p>Se le risorse hanno più istanze, posso avere dei casi in cui si creino dei cicli senza però che cada in situazione di deadlock. Nel grafo della slide, abbiamo P2 e P4 che non sono direttamente coinvolti nel ciclo (tra P1, R1, P3 ed R2), e grazie a loro verranno liberate delle istanze in R1 e R2 che sbloccheranno la situazione.
</p>
<div class='vspace'></div><h2>Pag 5</h2>
<h4>Metodi di gestione dei deadlock</h4>
<p>Il sistema operativo deve applicare dei metodi di gestione dei deadlock, o i miei processi non avanzerebbero più. Essi sono:
</p><ul><li><strong>ignorare il deadlock</strong>. Si è verificato? Amen. Posso permettermi di adottare tale strategia quando l'eventualità che accadano stalli sia rarissima, magari legata ad un errore hardware o software che avviene con frequenza molto bassa. Questa politica normalmente consente all'utente incazzato che non vede progredire il suo processo di killarlo o riavviare tutto il sistema.  In questo modo, essendo raro il fenomeno di stallo, sarà difficile che si ripresentino nello stesso modo e con lo stesso ordine le stesse richieste alle risorse da parte dei processi che hanno condotto al precedente deadlock.
</li><li><strong>prevenzione del deadlock</strong> (deadlock prevention), ovvero garantire nel momento in cui vengono fatte delle richieste (quindi <em>a priori</em>) che queste non vadano a generare situazioni di deadlock.
</li><li><strong>evitare il deadlock</strong> (deadlock avoidance), che lascia effettuare le richieste e poi nel caso <em>a posteriori</em> le blocca.
</li><li><strong>rilevazione e recupero del deadlock</strong>, anche qui in cui si suppone che la possibilità di avere stalli sia molto bassa.
</li></ul><p class='vspace'>Esistono diversi sistemi perché ognuno di questi comporta un carico diverso di lavoro sul processore, quindi posso decidere quale usare in base ai due fattori "<em>criticità della presenza del deadlock nel sistema</em>" (quanto posso permettermi di ignorarlo) e "<em>uso di risorse di calcolo</em>".
</p>
<div class='vspace'></div><hr />
<p><a class='wikilink' href='SistemiOperativi.html'>Torna alla pagina di Sistemi Operativi</a>
</p>
</div>

  <div id='printfoot'>
    <div class='printview'>(Printable View of <span style='white-space:nowrap;'>http://www.swappa.it/wiki/Uni/SO-Mod3-6-Lez1)</span></div>
  </div>
</body>
</html>
