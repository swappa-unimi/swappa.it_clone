<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
 <title>Swappa : Uni / Lezione di ESP del 16 Ventoso 216</title>
 <meta http-equiv='Content-Type' content='text/html; charset=ISO-8859-1' />
 <meta http-equiv='Content-Language' content='en' />
 <meta http-equiv='Content-Style-Type' content='text/css' />
 <meta http-equiv="imagetoolbar" content="no" />
 <meta name='MSSmartTagsPreventParsing' content='true' />
 <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
.progress-bar {
	display: block;
	background: transparent; 
	width: 520px;
	font-size: 1px; /* for IE */
	margin: 2px 0;
}

.progress-bar .pb1, .progress-bar .pb2, .progress-bar .pb3, .progress-bar .pb4 {
	display: block; 
	background: #fff; 
	border-left:  1px solid #999; 
	border-right: 1px solid #999;

	overflow: hidden; 
	height: 1px; 
}
.progress-bar .pb1 { margin: 0 4px; background: #999;}
.progress-bar .pb2 { margin: 0 2px; border-width: 0 2px; }
.progress-bar .pb3 { margin: 0 1px; }
.progress-bar .pb4 { height: 11px; padding: 0 3px; }
.progress-bar .pb5 { display: block; background: #eeeeef; overflow:hidden; }

.progress-bar .bar {
	display: block;
	background: #a5bbd8;
	height: 11px;
	padding: 0;
}
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>
  <link rel='stylesheet' href='../pub/wsplus/wsplus.css' 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url('http://www.swappa.it/wiki/pub/wsplus/csshover.htc'); }
    .rollover * { visibility: visible; }
  </style><![endif]-->
<script type='text/javascript' src='../pub/syntaxlove/scripts/shCore.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCSharp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCpp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushJava.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPerl.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPhp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPython.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushRuby.js'></script> <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shCore.css'/>
  <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shThemeDefault.css'/>
  <script type='text/javascript'>
  	SyntaxHighlighter.config.clipboardSwf = 'http://www.swappa.it/wiki/pub/syntaxlove/scripts/clipboard.swf';
  	SyntaxHighlighter.all();
  </script>  <meta name='robots' content='noindex,nofollow' />

 <style type='text/css'><!--

/* Default Fonts */
body { font-family: Verdana,Arial,Helvetica,sans-serif; }
body, td, th { color:#000000; }
body, td, th { font-size: 10pt; }
small { font-size:0.85em; }
code { white-space: nowrap; }
h1, h2, h3, h4, h5 { margin-top:1em; margin-bottom:0.6em; }
h1 { font-size: 1.9em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }
h4 { font-size: 1.06em; }
h5 { font-size: 1.0em; }
ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }

/* Misc. */
body { width:auto; background-color:#ffffff; margin:0px; padding:0.5em; }
img { border-width: 0px; }
.indent { margin-left:30px; }
.outdent { margin-left:30px; text-indent:-30px; }
.vspace { margin-top:1.33em; }

/* Links */
a:link { color:#333333; font-weight:normal; text-decoration:underline; }
a:visited { color:#333333; font-weight:normal; text-decoration:underline; }
a.wikilink:hover { color: #333333; text-decoration:underline; }
a.createlink { text-decoration:none; position:relative; top:-0.5em; font-weight:bold; font-size:smaller; border-bottom:none; }
a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
a.varlink { text-decoration:none; }
.apprlink { font-size:smaller; }

/* Print View Page Header */
#printhead { font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }
#printhead a, #printhead a:visited { font-weight:bold; text-decoration:none; }
#cc { float:right; font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }

/* Print View Page Footer */
#printfoot { font-family: Arial,Helvetica,Geneva,sans-serif; margin-top:1em; border-top:2px solid #a0a0a0; font-size:7pt; }
  
 --></style>
</head>
<body>
  <div id='printhead'>
    <a href='../index.html' title='Swappa Home'>Swappa</a> :
    <a href='http://www.swappa.it/wiki/Uni' title='Uni Home'>Uni</a> /
    <a href='ESP6marzo2008.html' title='Lezione di ESP del 16 Ventoso 216'>Lezione di ESP del 16 Ventoso 216</a>
    <div id='cc'>
	<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">
	<img alt="Creative Commons License" style="border-width:0" height="15" width="80" src="http://i.creativecommons.org/l/by-nc-sa/2.5/it/80x15.png" />
	</a>
    </div>
  </div>
  
<!--PageText-->
<div id='wikitext'>
<p>
</p><pre  style='text-align: center; background-color: #ffe4c4; border: 2px solid #cccccc; font-size: 13pt; padding: 5px;'> <strong>:: Lezione di ESP del 16 Ventoso 216 ::</strong>
</pre><p class='vspace'  style='text-align: center;'><span  style='background-color: #d9e4f2; font-size: 11pt; padding: 4px; padding-left: 50px; padding-right: 50px;'><strong>Altrimenti noto come 6 marzo 2008</strong></span>
</p>
<p class='vspace'><a class='wikilink' href='ElementiSicurezzaPrivatezza.html'>Torna alla pagina di ESP</a>
</p>
<div class='vspace'></div><h2>Covert Channel &amp; affini</h2>
<p>Le comunicazioni avvengono tramite canali. I canali legittimi sono quelli stabiliti dal sistema per far colloquiare le parti in gioco. A questi si possono aggiungere dei canali illegittimi, e farli operare secondo protocolli di comunicazione inusuali e soprattutto insospettabili. Solo chi sa che cosa cercare si accorge del tentativo di comunicazione illecito.
</p>
<p class='vspace'>Per fare un esempio, se durante una stampa il primo carattere della terza riga viene modificato in una <em>a</em>, indipendentemente dalla parola, la spia che osserva e che sa che cosa vuol dire dedurrebbe che è imminente un attacco nucleare a Crema.
</p>
<p class='vspace'>In termini più precisi, ogni variazione rispetto alla rappresentazione corretta di un dato codifica un singolo bit di informazione, il quale viene poi interpretato in un particolare modo. Ecco perché sopra ho parlato di un protocollo.
</p>
<div class='vspace'></div><h3>Storage channel</h3>
<p>Uno <strong>storage channel</strong> sfrutta la presenza o assenza in memoria di certi oggetti, per codificare un bit di informazione.
</p>
<p class='vspace'>Un sistema è la presenza o assenza di files in un certo posto. Per esempio, la presenza del file <em>prurru.txt</em> in <em>c:\</em> può voler dire una cosa, la sua assenza un'altra. Occorre però che sia il programma di servizio che il programma spia abbiano accesso alla stessa risorsa.
</p>
<p class='vspace'>Un altro sistema è la quota disco. Su certi sistemi, ad esempio UNIX &amp; co., è possibile assegnare una quota massima di utilizzo del filesystem ad un certo utente. Supponiamo che il programma di servizio tenti di scrivere un file di grosse dimensioni. Se vi riesce, vuol dire che vi è spazio disponibile. Se non vi riesce, vuol dire che quello spazio è occupato da qualcos'altro. Il programma spia riconosce questi eventi, e deduce l'esistenza del <em>qualcos'altro</em>.
</p>
<p class='vspace'>Come si può notare, è necessario che i 2 programmi, quello di servizio e quello spia, oltre ad avere accesso alle stesse risorse, devono anche avere una nozione di tempo condivisa: quando il programma di servizio comunica o meno, il programma spia deve essere in ascolto. Ciò non è così semplice come pare.
</p>
<div class='vspace'></div><h3>Timing Channel</h3>
<p>Qui andiamo a livelli ancora più balordi: se il programma spia <strong>usa</strong> o <strong>non usa</strong> il suo tempo di computazione assegnatogli dal SO, codifica un bit di informazione. Nomino solo il multitasking come indice dell'estrema complessità di questo sistema...
</p>
<div class='vspace'></div><h3>Come identificare i Covert Channel</h3>
<p>L'identificazione di questi canali non è per niente facile, per il motivo che usano sistemi "standard", poi interpretati in un certo modo dal programma spia.
</p>
<p class='vspace'>Un sistema è quello di <strong>controllare le risorse condivise</strong>, perché proprio sulla presenza di queste i covert channel funzionano.
Si costruisce una matrice in cui le righe sono le risorse, e le colonne i processi che possono accedervi. Nelle celle metto <strong>R</strong> se quel processo può leggere quella risorsa, o <strong>M</strong> se la può modificare. Poi cerco dei pattern a quadrato, ovvero in cui 2 processi hanno accesso a 2 risorse diverse. Potrebbe essere indizio di maliziosità.
</p>
<p class='vspace'>Altro sistema è l<strong>'analisi del flusso di info</strong>, in cui si analizza il codice sorgente dei programmi, e si stabilisce il flusso delle informazioni.
Un assegnamento di valore ad una variabile, ad esempio <strong>a = b;</strong> significa che c'è un flusso da <strong>b</strong> verso <strong>a</strong>. Una cosa come <strong>if (d == 1) b = a;</strong> rappresenta un flusso implicito tra <strong>d</strong> e <strong>a</strong>. Idem per le chiamati di funzione: <strong>b = funzione(parametro)</strong> sposta info verso <strong>b</strong>.
</p>
<p class='vspace'>Ma come avete potuto capire, si tratta di sistemi che possono solo dire: "eh controlla meglio che forse forse c'è qualcosa di losco". Non possono dire molto di più.
</p>
<div class='vspace'></div><h2>Buffer overflow</h2>
<p  style='text-align: center; background-color: red; border: 3px dotted yellow; padding: 3px;'><span  style='color: yellow;'><strong><span style='font-size:120%'>OCIO</span><br />La qualità degli appunti seguenti è molto bassa, in quanto le condizioni di attenzione di quell'ora erano scarsissime...:)</strong></span>
</p>
<p class='vspace'>Il <strong>buffer</strong> è un area di memoria che serve per memorizzare temporaneamente dei dati. Nello <strong>stack</strong> essa ha una certa dimensione assegnata, ma confina con l'area destinata all'indirizzo di ritorno, ovvero l'indirizzo della funzione che ha chiamato la parte di codice proprietaria di questo stack.
</p>
<p class='vspace'>Il <strong>buffer overflow</strong> sfrutta una caratteristica di diverse funzioni che utilizzano buffer per immagazzinare dati. Esse si aspettano una certa quantità di dati in ingresso. E quelle scritte male, anche se ne arrivano di più, non fanno nessuna storia. Ma il sistema ha assegnato al buffer una quantità fissa di spazio. Se arriva più roba, dove la metto? Semplice: sovrascrivo le aree dello stack circostanti!
Con un po' di abilità e fortuna, posso inviare dati maliziosi i quali sovrascrivano allegramente l'indirizzo di ritorno, mettendoci al suo posto l'indirizzo del mio codice malizioso, o comunque dati che possono inficiare il buon funzionamento del programma.
Per metterci un altro indirizzo, occorre però sapere esattamente dove in memoria il mio codice si trovi, e non è affatto una cosa banale.
Posso anche modificare i valori di ritorno, causando chissà quali danni. O mettere addirittura il codice eseguibile nello stack, passandolo come parametro.
</p>
<p class='vspace'>Il buffer overflow dipende quindi dall'implementazione delle funzioni in un particolare linguaggio di programmazione. Per evitare debolezze del genere, si possono usare linguaggi come Java, che sono sicuri da questo punto di vista, o stabilire che lo stack non sia eseguibile.
</p>
<p class='vspace'><a class='wikilink' href='ElementiSicurezzaPrivatezza.html'>Torna alla pagina di ESP</a>
</p>
<div class='vspace'></div>
</div>

  <div id='printfoot'>
    <div class='printview'>(Printable View of <span style='white-space:nowrap;'>http://www.swappa.it/wiki/Uni/ESP6marzo2008)</span></div>
  </div>
</body>
</html>
