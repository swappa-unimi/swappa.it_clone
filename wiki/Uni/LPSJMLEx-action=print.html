<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
 <title>Swappa : Uni / LPS - Esercizi JML</title>
 <meta http-equiv='Content-Type' content='text/html; charset=ISO-8859-1' />
 <meta http-equiv='Content-Language' content='en' />
 <meta http-equiv='Content-Style-Type' content='text/css' />
 <meta http-equiv="imagetoolbar" content="no" />
 <meta name='MSSmartTagsPreventParsing' content='true' />
 <!--HeaderText--><style type='text/css'><!--
  ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }
  code.escaped { white-space: nowrap; }
  .vspace { margin-top:1.33em; }
  .indent { margin-left:40px; }
  .outdent { margin-left:40px; text-indent:-40px; }
  a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
  a.createlink { text-decoration:none; position:relative; top:-0.5em;
    font-weight:bold; font-size:smaller; border-bottom:none; }
  img { border:0px; }
  
.progress-bar {
	display: block;
	background: transparent; 
	width: 520px;
	font-size: 1px; /* for IE */
	margin: 2px 0;
}

.progress-bar .pb1, .progress-bar .pb2, .progress-bar .pb3, .progress-bar .pb4 {
	display: block; 
	background: #fff; 
	border-left:  1px solid #999; 
	border-right: 1px solid #999;

	overflow: hidden; 
	height: 1px; 
}
.progress-bar .pb1 { margin: 0 4px; background: #999;}
.progress-bar .pb2 { margin: 0 2px; border-width: 0 2px; }
.progress-bar .pb3 { margin: 0 1px; }
.progress-bar .pb4 { height: 11px; padding: 0 3px; }
.progress-bar .pb5 { display: block; background: #eeeeef; overflow:hidden; }

.progress-bar .bar {
	display: block;
	background: #a5bbd8;
	height: 11px;
	padding: 0;
}
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
  div.faqtoc div.faq * { display:none; }
  div.faqtoc div.faq p.question 
    { display:block; font-weight:normal; margin:0.5em 0 0.5em 20px; line-height:normal; }
  div.faqtoc div.faq p.question * { display:inline; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }

--></style>
  <link rel='stylesheet' href='../pub/wsplus/wsplus.css' 
    type='text/css' />
  <!--[if IE]><style type='text/css' media='screen'>
    body { behavior:url('http://www.swappa.it/wiki/pub/wsplus/csshover.htc'); }
    .rollover * { visibility: visible; }
  </style><![endif]-->
<script type='text/javascript' src='../pub/syntaxlove/scripts/shCore.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCSharp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushCpp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushJava.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPerl.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPhp.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushPython.js'></script><script type='text/javascript' src='../pub/syntaxlove/scripts/shBrushRuby.js'></script> <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shCore.css'/>
  <link type='text/css' rel='stylesheet' href='../pub/syntaxlove/css/shThemeDefault.css'/>
  <script type='text/javascript'>
  	SyntaxHighlighter.config.clipboardSwf = 'http://www.swappa.it/wiki/pub/syntaxlove/scripts/clipboard.swf';
  	SyntaxHighlighter.all();
  </script>  <meta name='robots' content='noindex,nofollow' />

 <style type='text/css'><!--

/* Default Fonts */
body { font-family: Verdana,Arial,Helvetica,sans-serif; }
body, td, th { color:#000000; }
body, td, th { font-size: 10pt; }
small { font-size:0.85em; }
code { white-space: nowrap; }
h1, h2, h3, h4, h5 { margin-top:1em; margin-bottom:0.6em; }
h1 { font-size: 1.9em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.25em; }
h4 { font-size: 1.06em; }
h5 { font-size: 1.0em; }
ul, ol, pre, dl, p { margin-top:0px; margin-bottom:0px; }

/* Misc. */
body { width:auto; background-color:#ffffff; margin:0px; padding:0.5em; }
img { border-width: 0px; }
.indent { margin-left:30px; }
.outdent { margin-left:30px; text-indent:-30px; }
.vspace { margin-top:1.33em; }

/* Links */
a:link { color:#333333; font-weight:normal; text-decoration:underline; }
a:visited { color:#333333; font-weight:normal; text-decoration:underline; }
a.wikilink:hover { color: #333333; text-decoration:underline; }
a.createlink { text-decoration:none; position:relative; top:-0.5em; font-weight:bold; font-size:smaller; border-bottom:none; }
a.createlinktext { text-decoration:none; border-bottom:1px dotted gray; }
a.varlink { text-decoration:none; }
.apprlink { font-size:smaller; }

/* Print View Page Header */
#printhead { font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }
#printhead a, #printhead a:visited { font-weight:bold; text-decoration:none; }
#cc { float:right; font-size:11pt; border-bottom:2px solid #a0a0a0; margin-bottom:1em; }

/* Print View Page Footer */
#printfoot { font-family: Arial,Helvetica,Geneva,sans-serif; margin-top:1em; border-top:2px solid #a0a0a0; font-size:7pt; }
  
 --></style>
</head>
<body>
  <div id='printhead'>
    <a href='../index.html' title='Swappa Home'>Swappa</a> :
    <a href='http://www.swappa.it/wiki/Uni' title='Uni Home'>Uni</a> /
    <a href='LPSJMLEx.html' title='LPS - Esercizi JML'>LPS - Esercizi JML</a>
    <div id='cc'>
	<a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/2.5/it/">
	<img alt="Creative Commons License" style="border-width:0" height="15" width="80" src="http://i.creativecommons.org/l/by-nc-sa/2.5/it/80x15.png" />
	</a>
    </div>
  </div>
  
<!--PageText-->
<div id='wikitext'>
<p>
</p><pre  style='text-align: center; background-color: #ffe4c4; border: 2px solid #cccccc; font-size: 13pt; padding: 5px;'> <strong>:: Esercizi JML ::</strong>
</pre><div class='vspace'></div><h2>IntStack</h2>
<p>La classe Java IntStack riportata sotto implementa la struttura dati STACK (una pila) per numeri interi tramite un array di dimensione finita ma che all’occorrenza può essere ridimensionato (vedi resize()) per aumentare la sua capacità di buffer.<br />Utilizzando JML, arricchire la classe IntStack secondo i principi del design by contract inserendo i seguenti invarianti:
</p><ul><li>Il buffer deve essere non nullo;
</li><li>In un qualunque momento, la posizione di cima dello stack (il campo number) deve essere un numero positivo e non superare la capacità del buffer;
</li></ul><p>e le seguenti e pre-/post- condizioni:
</p><ul><li>La chiamata al costruttore IntStack(n) deve garantire la creazione di uno stack di capacità n e inizialmente vuoto;
</li><li>Al termine dell’esecuzione del metodo push(e), il numero e deve essere stato effettivamente inserito in cima allo stack;
</li><li>L’esecuzione del metodo pop() richiede che lo stack sia non vuoto;
</li><li>Al termine dell’esecuzione del metodo pop(), il numero in cima allo stack è stato
</li></ul><p>cancellato;
</p><ul><li>Al termine dell’esecuzione del metodo resize(), la capacità del buffer è stata
</li></ul><p>incrementata mantenendo il suo contenuto e lo stesso valore per la posizione di cima.
Con un metodo main(), creare scenari validi/non validi (compilare con jmlc –Q).
</p>
<div class='vspace'></div><pre class='escaped'>
class IntStack {

  // Il buffer deve essere non nullo
  /*@ non_null @*/ int[] stack; //buffer dello stack

  int number; //posizione di cima dello stack (prima posizione libera!)
  // In un _qualunque_momento_ (invariante), la posizione di cima dello stack deve 
  //essere un  numero positivo
  // e non superare la capacità dello stack
  //@ invariant number &gt;= 0 &amp;&amp; number &lt;= stack.length;

  //Metodo costruttore: viene creato uno stack di capacità n ed inizialmente vuoto
  // La chiamata al costruttore deve garantire la costruzione di uno stack di capacità 
  //n ed inizialmente vuoto
  // Si tratta di una post
  /*@
  @ ensures stack.length == n &amp;&amp; number == 0;
  @  
  @*/
  IntStack(int n) {
    stack = new int[n];
    number = 0;
  }

  //Restituisce true se lo stack è vuoto, false altrimenti
  boolean isempty() { 
    return number == 0; 
  }

  // Alla fine dell'esecuzione di push, il numero e deve essere effettivamente
  // inserito in cima allo stack
  /*@
  @ ensures (number == \old(number) +1) &amp;&amp; (stack[\old(number)] == e);
  @*/

  void push(int e) {
    if (number == stack.length)
    resize();
    stack[number] = e;
    number = number+1;
  }

  //Cancella (e restituisce) un elemento dalla cima dello stack
  // L'esecuzione del metodo pop richiede che lo stack sia non vuoto: +è una pre che
  // dice che devo avere almeno un elemento
  /*@
  @ requires number &gt; 0;
  @*/

  // Al termine dell'esecuzione di pop, il numero in cima allo stack deve essere cancellato
  /*@
  @ ensures (number == \old(number) - 1) &amp;&amp; (\result == stack[number]);
  @*/

  int pop() {
    number = number-1;
    return stack[number];
  }

  //Aumenta la capacità di bufferizzazione dello stack
  //Al termine dell'esecuzione di resize, occorre che la capacità sia stata 
  //incrementata, ma gli elementi
  //devono essere mantenuti, e anche il valore di cima deve essere rimasto uguale
  /*@
  @ ensures stack.length == ((\old(stack.length) * 2) + 1) &amp;&amp; (number == \old(number)) 
  @ &amp;&amp; (\forall int i; 0 &lt;= i &amp;&amp; i &lt; number; stack[i] == \old(stack[i]));
  @*/
  // In realtà potrei anche scrivere ensures stack.length &gt; old(stack.length), visto   
  //che le specifiche mi dicono solamente
  // che la dimensione dello stack va incrementata, ma non di quanto
  void resize() {
    int s[] = new int[2*stack.length+1];
    for (int i=0; i&lt;stack.length; i++)
      s[i] = stack[i];
    stack = s;
  }

  static public void main(String[] args) {
    IntStack S = new IntStack(10);
    S.push(20);
    S.push(30);
    int result = S.pop();
    System.out.println("Valore popped = " + result);
  }
}
</pre>
<div class='vspace'></div><hr />
<p><a class='wikilink' href='LinguaggiProgrammazioneSicurezza.html'>Torna alla pagina di LPS</a>
</p>
</div>

  <div id='printfoot'>
    <div class='printview'>(Printable View of <span style='white-space:nowrap;'>http://www.swappa.it/wiki/Uni/LPSJMLEx)</span></div>
  </div>
</body>
</html>
